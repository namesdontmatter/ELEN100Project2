
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>ELEN 100L (Electric Circuits II): Project 2, Shane Buck, Thomas Heckman</title><meta name="generator" content="MATLAB 9.3"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2018-03-20"><meta name="DC.source" content="ELEN100L_Project_2_Solution_ShaneBuck_ThomasHeckman_W16.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>ELEN 100L (Electric Circuits II): Project 2, Shane Buck, Thomas Heckman</h1><!--introduction--><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_01_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><p><b>Hard Copy Deliverables:</b></p><div><ol><li>Hard copy for hand calculations.</li><li>A MATLAB script and publish the solution using MATLAB's <b>publish</b> feature.</li><li>Turn in MATLAB scripts and a document of the run-time results.</li><li>Turn in oscilloscope images of the measured results.</li></ol></div><p><b>Soft Copy Deliverables:</b></p><div><ol><li>Turn in all MATLAB files.</li><li>Turn in all LTSpice files.</li><li>Turn in all oscilloscope images of the measured results.</li></ol></div><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Initialize MATLAB Environment</a></li><li><a href="#2">Setup global variables</a></li><li><a href="#3">Problem 2</a></li><li><a href="#8">Problem 3</a></li><li><a href="#15">Problem 6</a></li><li><a href="#26">Problem 7  Template</a></li><li><a href="#51">Program execution complete</a></li><li><a href="#52">MATLAB code listing</a></li></ul></div><h2 id="1">Initialize MATLAB Environment</h2><pre class="codeinput">clear; clc; clf; cla; close <span class="string">all</span>;
format <span class="string">long</span>; format <span class="string">compact</span>;
</pre><h2 id="2">Setup global variables</h2><pre class="codeinput"><span class="comment">% These Ideal Design element values are fixed in the circuit.</span>
VG  =  1 ;                     <span class="comment">% Generator voltage</span>

Vdd_pos  =  15     ;            <span class="comment">% Positive power supply voltage</span>
Vdd_neg  = -15     ;            <span class="comment">% Negative power supply voltage</span>

R1_ideal_2 = 5000      ;     <span class="comment">% Ohms</span>
R2_ideal_2 = 5000          ;     <span class="comment">% Ohms</span>
R3_ideal_2 = 400          ;     <span class="comment">% Ohms</span>
R4_ideal_2 = 1000          ;     <span class="comment">% Ohms</span>
R5_ideal_2 = 1000          ;     <span class="comment">% Ohms</span>
C1_ideal_2 = 0.1*10^-6           ;    <span class="comment">% Farads</span>
C2_ideal_2 = 0.1*10^-6           ;    <span class="comment">% Farads</span>

R1_ideal_6 = 1373          ;     <span class="comment">% Ohms</span>
R2_ideal_6 = 1373          ;     <span class="comment">% Ohms</span>
R3_ideal_6 = 960          ;     <span class="comment">% Ohms</span>
R4_ideal_6 = 1000          ;     <span class="comment">% Ohms</span>
R5_ideal_6 = 1000          ;     <span class="comment">% Ohms</span>
C1_ideal_6 = 0.1*10^-6           ;    <span class="comment">% Farads</span>
C2_ideal_6 = 0.1*10^-6           ;    <span class="comment">% Farads</span>

<span class="comment">% Build an array for the R elements.</span>
R_ideal_2 = [R1_ideal_2, R2_ideal_2, R3_ideal_2, R4_ideal_2, R5_ideal_2];
R_ideal_6 = [R1_ideal_6, R2_ideal_6, R3_ideal_6, R4_ideal_6, R5_ideal_6];

<span class="comment">% Build an array for the C elements.</span>
C_ideal_2 = [ (0),           (0),           (0), (0), (0)         ; <span class="keyword">...</span>
              (0), -(C1_ideal_2),           (0), (0), (C1_ideal_2); <span class="keyword">...</span>
              (0),           (0), -(C2_ideal_2), (0), (0)         ; <span class="keyword">...</span>
              (0),           (0),           (0), (0), (0)         ; <span class="keyword">...</span>
              (0),           (0),           (0), (0), (0)         ];

C_ideal_6 = [ (0),           (0),           (0), (0), (0)         ; <span class="keyword">...</span>
              (0), -(C1_ideal_6),           (0), (0), (C1_ideal_6); <span class="keyword">...</span>
              (0),           (0), -(C2_ideal_6), (0), (0)         ; <span class="keyword">...</span>
              (0),           (0),           (0), (0), (0)         ; <span class="keyword">...</span>
              (0),           (0),           (0), (0), (0)         ];


<span class="comment">% Build an array for the source elements.</span>
B = [VG;0;0;0;0];

<span class="comment">% Build an array for the the time vector.</span>
time2 = [0, 3*10^(-3)];
time6 = [0, 1*10^(-3)];

<span class="comment">% Build an array for the the initial conditions.</span>
x0 = [0; 0; 0; 0; 0];     <span class="comment">% Assume everything is zero to start</span>

<span class="comment">% These values are used for plotting purposes.</span>
fignum = 1;

plot_left_2   = 0;   plot_right_2 = time2(2);   <span class="comment">% x-axis range (seconds)</span>
plot_bottom_2 = 0;   plot_top_2   = VG+0.6;     <span class="comment">% y-axis range (volts)</span>

plot_left_6   = 0;   plot_right_6 = time6(2);   <span class="comment">% x-axis range (seconds)</span>
plot_bottom_6 = 0;   plot_top_6   = VG+0.2;     <span class="comment">% y-axis range (volts)</span>
</pre><h2 id="3">Problem 2</h2><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_02_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>Display the component values for the Ideal design.</p><pre class="codeinput">display(<span class="string">' '</span>);
display(<span class="string">'The Ideal Design component values are:'</span>);
fprintf(<span class="string">'    R1 = %+11.4f Ohms.\n'</span>, R1_ideal_2);
fprintf(<span class="string">'    R2 = %+11.4f Ohms.\n'</span>, R2_ideal_2);
fprintf(<span class="string">'    R3 = %+11.4f Ohms.\n'</span>, R3_ideal_2);
fprintf(<span class="string">'    R4 = %+11.4f Ohms.\n'</span>, R4_ideal_2);
fprintf(<span class="string">'    R5 = %+11.4f Ohms.\n'</span>, R5_ideal_2);
fprintf(<span class="string">'    C1 = %+11.4e Farads.\n'</span>, C1_ideal_2);
fprintf(<span class="string">'    C2 = %+11.4e Farads.\n'</span>, C2_ideal_2);
</pre><pre class="codeoutput"> 
The Ideal Design component values are:
    R1 =  +5000.0000 Ohms.
    R2 =  +5000.0000 Ohms.
    R3 =   +400.0000 Ohms.
    R4 =  +1000.0000 Ohms.
    R5 =  +1000.0000 Ohms.
    C1 = +1.0000e-07 Farads.
    C2 = +1.0000e-07 Farads.
</pre><p>Calculate the MATLAB transient response for the Ideal design.</p><pre class="codeinput"><span class="comment">% Update the resistor variables used in the proj2E100_transient function</span>
<span class="comment">% before calling the ode23t solver.</span>
R1_circuit =  R1_ideal_2;
R2_circuit =  R2_ideal_2;
R3_circuit =  R3_ideal_2;
R4_circuit =  R4_ideal_2;
R5_circuit =  R5_ideal_2;

options  = odeset(<span class="string">'mass'</span>, C_ideal_2 , <span class="string">'RelTol'</span>, 0.1e-9);
[t2, x2] = ode23t(@proj2E100_transient, time2, x0, options);

<span class="comment">% Capture peak overshoot and undershoot voltages with indexes.</span>
[v5_pk_overshoot_ideal_2 , <span class="keyword">...</span>
    v5_pk_overshoot_ideal_index_2 ] = max( x2(:,5) );
[v5_pk_undershoot_ideal_2, <span class="keyword">...</span>
    v5_pk_undershoot_ideal_index_2] = <span class="keyword">...</span>
    min( x2(v5_pk_overshoot_ideal_index_2 + 1:size(t2),5) );
v5_pk_undershoot_ideal_index_2 = <span class="keyword">...</span>
    v5_pk_undershoot_ideal_index_2 + v5_pk_overshoot_ideal_index_2;

<span class="comment">% Capture peak overshoot and undershoot time stamps at peak indexes.</span>
t2_pk_overshoot_ideal_2  = t2( v5_pk_overshoot_ideal_index_2);
t2_pk_undershoot_ideal_2 = t2(v5_pk_undershoot_ideal_index_2);
</pre><p>Generate the MATLAB plot for the transient response.</p><pre class="codeinput">fignum = fignum+1; figObj = figure(fignum);  <span class="comment">% Establish a figure number</span>
set(fignum, <span class="string">'Name'</span>, <span class="keyword">...</span>
    [<span class="string">'Prob 2: Transient Response Ideal Design'</span>]); <span class="comment">% Name the figure</span>

Tr_ideal_2_Plot = plot(t2,x2);                  <span class="comment">% Generate plot</span>
grid <span class="string">on</span>;                                     <span class="comment">% Turn grid on</span>
xlabel(<span class="string">'Time (seconds)'</span>);                    <span class="comment">% Label the x-axis</span>
ylabel(<span class="string">'Amplitude (volts)'</span>);                 <span class="comment">% Label the y-axis</span>
axis([plot_left_2, plot_right_2, <span class="keyword">...</span>
      plot_bottom_2, plot_top_2]);           <span class="comment">% Bound plot</span>
title([<span class="string">'Figure '</span>,num2str(fignum,<span class="string">'%-2.u'</span>),<span class="keyword">...</span>
       <span class="string">': Problem 2 Transient Response Ideal Design'</span>]);
legend(<span class="string">'v_1(t)'</span>, <span class="string">'v_2(t)'</span>, <span class="string">'v_3(t)'</span>, <span class="string">'v_4(t)'</span>, <span class="string">'v_5(t)'</span>, <span class="keyword">...</span>
    <span class="string">'Location'</span>, <span class="string">'NorthEast'</span>);

<span class="comment">% Add annotation to the plot.</span>
strmax = [<span class="string">'\leftarrow '</span>, num2str(t2_pk_overshoot_ideal_2 * 1e6), <span class="keyword">...</span>
          <span class="string">'\mus, '</span>, num2str(v5_pk_overshoot_ideal_2),<span class="string">'V'</span>];
text(t2_pk_overshoot_ideal_2, <span class="keyword">...</span>
     v5_pk_overshoot_ideal_2, <span class="keyword">...</span>
     strmax, <span class="string">'HorizontalAlignment'</span>, <span class="string">'left'</span>, <span class="string">'FontWeight'</span>, <span class="string">'bold'</span>);

strmin = [<span class="string">'\leftarrow '</span>, num2str(t2_pk_undershoot_ideal_2 * 1e6), <span class="keyword">...</span>
          <span class="string">'\mus, '</span>, num2str(v5_pk_undershoot_ideal_2),<span class="string">'V'</span>];
text(t2_pk_undershoot_ideal_2, <span class="keyword">...</span>
     v5_pk_undershoot_ideal_2, <span class="keyword">...</span>
     strmin, <span class="string">'HorizontalAlignment'</span>, <span class="string">'left'</span>, <span class="string">'FontWeight'</span>, <span class="string">'bold'</span>);
</pre><img vspace="5" hspace="5" src="ELEN100L_Project_2_Solution_ShaneBuck_ThomasHeckman_W16_01.png" alt=""> <p>Display the MATLAB peak overshoot and undershoot values for the Ideal design.</p><pre class="codeinput">display(<span class="string">' '</span>);
display(<span class="string">'The MATLAB peak overshoot and undershoot values are:'</span>);
fprintf(<span class="string">'    V5 p.o. = %+11.4f Volts.\n'</span>, v5_pk_overshoot_ideal_2);
fprintf(<span class="string">'    V5 p.u. = %+11.4f Volts.\n'</span>, v5_pk_undershoot_ideal_2);
fprintf(<span class="string">'     t p.o. = %+11.4e seconds.\n'</span>, t2_pk_overshoot_ideal_2);
fprintf(<span class="string">'     t p.u. = %+11.4e seconds.\n'</span>, t2_pk_undershoot_ideal_2);
</pre><pre class="codeoutput"> 
The MATLAB peak overshoot and undershoot values are:
    V5 p.o. =     +1.5266 Volts.
    V5 p.u. =     +0.7226 Volts.
     t p.o. = +3.2217e-04 seconds.
     t p.u. = +6.4119e-04 seconds.
</pre><h2 id="8">Problem 3</h2><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_03_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>The LTSpice schematic for the circuit is shown below.</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_04_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>The LTSpice voltage source setup for the circuit is shown below.</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_05_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>The LTSpice model transient analysis simulation setup is shown below.</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_06_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>The LTSpice model for the simulation result is shown below.</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_07_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;

<span class="comment">% Capture peak overshoot and undershoot voltages from the LTSpice plot.</span>
ltspice_v5_pk_overshoot_ideal_2  =  1.5268;
ltspice_v5_pk_undershoot_ideal_2 =  0.7225;

<span class="comment">% Capture peak overshoot and undershoot time stamps from the LTSpice plot.</span>
ltspice_t2_pk_overshoot_ideal_2  =  722*10^-6;
ltspice_t2_pk_undershoot_ideal_2 =  1.039*10^-3;
</pre><p>Display the LTSpice peak overshoot and undershoot values for the Ideal design.</p><pre class="codeinput">display(<span class="string">' '</span>);
display(<span class="string">'The LTSpice peak overshoot and undershoot values are:'</span>);
fprintf(<span class="string">'    V5 p.o. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
    ltspice_v5_pk_overshoot_ideal_2);
fprintf(<span class="string">'    V5 p.u. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
    ltspice_v5_pk_undershoot_ideal_2);
fprintf(<span class="string">'     t p.o. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
    ltspice_t2_pk_overshoot_ideal_2);
fprintf(<span class="string">'     t p.u. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
    ltspice_t2_pk_undershoot_ideal_2);
</pre><pre class="codeoutput"> 
The LTSpice peak overshoot and undershoot values are:
    V5 p.o. =     +1.5268 Volts.
    V5 p.u. =     +0.7225 Volts.
     t p.o. = +7.2200e-04 seconds.
     t p.u. = +1.0390e-03 seconds.
</pre><p>Calculate the percent difference at the peak overshoot and undershoot values between MATLAB and LTSpice Ideal Designs.</p><pre class="codeinput">diff_ideal_v5_pk_overshoot_2  = <span class="keyword">...</span>
    (ltspice_v5_pk_overshoot_ideal_2 - v5_pk_overshoot_ideal_2) <span class="keyword">...</span>
    /abs(v5_pk_overshoot_ideal_2)*100;
diff_ideal_v5_pk_undershoot_2 = <span class="keyword">...</span>
    (ltspice_v5_pk_undershoot_ideal_2 - v5_pk_undershoot_ideal_2) <span class="keyword">...</span>
    /abs(v5_pk_undershoot_ideal_2)*100;
diff_ideal_t2_pk_overshoot_2  = <span class="keyword">...</span>
    (ltspice_t2_pk_overshoot_ideal_2 - t2_pk_overshoot_ideal_2) <span class="keyword">...</span>
    /abs(t2_pk_overshoot_ideal_2)*100;
diff_ideal_t2_pk_undershoot_2 = <span class="keyword">...</span>
    (ltspice_t2_pk_undershoot_ideal_2 - t2_pk_undershoot_ideal_2) <span class="keyword">...</span>
    /abs(t2_pk_undershoot_ideal_2)*100;

display(<span class="string">' '</span>);
display(<span class="string">'The % difference between MATLAB and LTSpice at the peaks:'</span>);
fprintf(<span class="string">'    MATLAB  V5 p.o. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         v5_pk_overshoot_ideal_2);
fprintf(<span class="string">'    LTSpice V5 p.o. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         ltspice_v5_pk_overshoot_ideal_2);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_ideal_v5_pk_overshoot_2);

fprintf(<span class="string">'    MATLAB  V5 p.u. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
            v5_pk_undershoot_ideal_2);
fprintf(<span class="string">'    LTSpice V5 p.u. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
            ltspice_v5_pk_undershoot_ideal_2);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
            diff_ideal_v5_pk_undershoot_2);

fprintf(<span class="string">'    MATLAB   t p.o. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
            t2_pk_overshoot_ideal_2);
fprintf(<span class="string">'    LTSpice  t p.o. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
            ltspice_t2_pk_overshoot_ideal_2);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
            diff_ideal_t2_pk_overshoot_2);
fprintf(<span class="string">'    MATLAB   t p.u. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
            t2_pk_undershoot_ideal_2);
fprintf(<span class="string">'    LTSpice  t p.u. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
            ltspice_t2_pk_undershoot_ideal_2);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
            diff_ideal_t2_pk_undershoot_2);
</pre><pre class="codeoutput"> 
The % difference between MATLAB and LTSpice at the peaks:
    MATLAB  V5 p.o. =     +1.5266 Volts.
    LTSpice V5 p.o. =     +1.5268 Volts.
        % diff =  +0.0116 (%).
    MATLAB  V5 p.u. =     +0.7226 Volts.
    LTSpice V5 p.u. =     +0.7225 Volts.
        % diff =  -0.0189 (%).
    MATLAB   t p.o. = +3.2217e-04 seconds.
    LTSpice  t p.o. = +7.2200e-04 seconds.
        % diff = +124.1069 (%).
    MATLAB   t p.u. = +6.4119e-04 seconds.
    LTSpice  t p.u. = +1.0390e-03 seconds.
        % diff = +62.0430 (%).
</pre><h2 id="15">Problem 6</h2><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_08_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>Display the component values for the Ideal design.</p><pre class="codeinput">display(<span class="string">' '</span>);
display(<span class="string">'The Ideal Design component values are:'</span>);
fprintf(<span class="string">'    R1 = %+11.4f Ohms.\n'</span>,  R1_ideal_6 );
fprintf(<span class="string">'    R2 = %+11.4f Ohms.\n'</span>,  R2_ideal_6);
fprintf(<span class="string">'    R3 = %+11.4f Ohms.\n'</span>,  R3_ideal_6);
fprintf(<span class="string">'    R4 = %+11.4f Ohms.\n'</span>,  R4_ideal_6);
fprintf(<span class="string">'    R5 = %+11.4f Ohms.\n'</span>,  R5_ideal_6);
fprintf(<span class="string">'    C1 = %+11.4e Farads.\n'</span>, C1_ideal_6);
fprintf(<span class="string">'    C2 = %+11.4e Farads.\n'</span>, C2_ideal_6);
</pre><pre class="codeoutput"> 
The Ideal Design component values are:
    R1 =  +1373.0000 Ohms.
    R2 =  +1373.0000 Ohms.
    R3 =   +960.0000 Ohms.
    R4 =  +1000.0000 Ohms.
    R5 =  +1000.0000 Ohms.
    C1 = +1.0000e-07 Farads.
    C2 = +1.0000e-07 Farads.
</pre><p>Calculate the MATLAB transient response for the Ideal design.</p><pre class="codeinput"><span class="comment">% Update the resistor variables used in the proj2E100_transient function</span>
<span class="comment">% before calling the ode23t solver.</span>
R1_circuit =  R1_ideal_6;
R2_circuit =  R2_ideal_6 ;
R3_circuit =  R3_ideal_6;
R4_circuit =  R4_ideal_6;
R5_circuit =  R5_ideal_6;

<span class="comment">%ODE solution, refer to the example in Problem 2</span>
options  = odeset(<span class="string">'mass'</span>,C_ideal_6, <span class="string">'RelTol'</span>, 0.1e-9);
[t6, x6] = ode23t(@proj2E100_transient, time6, x0, options);

<span class="comment">% Capture peak overshoot and undershoot voltages with indexes.</span>
[v5_pk_overshoot_ideal_6 , <span class="keyword">...</span>
    v5_pk_overshoot_ideal_index_6 ] = max( x6(:,5) );
[v5_pk_undershoot_ideal_6, <span class="keyword">...</span>
    v5_pk_undershoot_ideal_index_6] = <span class="keyword">...</span>
    min( x6(v5_pk_overshoot_ideal_index_6 + 1:size(t6),5) );
v5_pk_undershoot_ideal_index_6 = <span class="keyword">...</span>
    v5_pk_undershoot_ideal_index_6 + v5_pk_overshoot_ideal_index_6;

<span class="comment">% Capture peak overshoot and undershoot time stamps at peak indexes.</span>
t6_pk_overshoot_ideal_6  = t6(v5_pk_overshoot_ideal_index_6);
t6_pk_undershoot_ideal_6 = t6(v5_pk_undershoot_ideal_index_6);
</pre><p>Generate the MATLAB plot for the transient response.</p><pre class="codeinput">fignum = fignum+1; figObj = figure(fignum);  <span class="comment">% Establish a figure number</span>
set(fignum, <span class="string">'Name'</span>, <span class="keyword">...</span>
    [<span class="string">'Prob 6: Transient Response Ideal Design'</span>]); <span class="comment">% Name the figure</span>

Tr_ideal_6_Plot = plot(t6,x6);                <span class="comment">% Generate plot</span>
grid <span class="string">on</span>;                                     <span class="comment">% Turn grid on</span>
xlabel(<span class="string">'Time (seconds)'</span>);                    <span class="comment">% Label the x-axis</span>
ylabel(<span class="string">'Amplitude (volts)'</span>);                 <span class="comment">% Label the y-axis</span>
axis([plot_left_6, plot_right_6, <span class="keyword">...</span>
      plot_bottom_6, plot_top_6]);           <span class="comment">% Bound plot</span>
title([<span class="string">'Figure '</span>,num2str(fignum,<span class="string">'%-2.u'</span>),<span class="keyword">...</span>
       <span class="string">': Problem 6 Transient Response Ideal Design'</span>]);
legend(<span class="string">'v_1(t)'</span>, <span class="string">'v_2(t)'</span>, <span class="string">'v_3(t)'</span>, <span class="string">'v_4(t)'</span>, <span class="string">'v_5(t)'</span>, <span class="keyword">...</span>
    <span class="string">'Location'</span>, <span class="string">'NorthEast'</span>);

<span class="comment">% Add annotation to the plot.</span>
strmax = [<span class="string">'\leftarrow '</span>, num2str(t6_pk_overshoot_ideal_6 * 1e6), <span class="keyword">...</span>
          <span class="string">'\mus, '</span>, num2str(v5_pk_overshoot_ideal_6),<span class="string">'V'</span>];
text(t6_pk_overshoot_ideal_6, <span class="keyword">...</span>
     v5_pk_overshoot_ideal_6, <span class="keyword">...</span>
     strmax, <span class="string">'HorizontalAlignment'</span>, <span class="string">'left'</span>, <span class="string">'FontWeight'</span>, <span class="string">'bold'</span>);

strmin = [num2str(t6_pk_undershoot_ideal_6 * 1e6), <span class="keyword">...</span>
          <span class="string">'\mus, '</span>, num2str(v5_pk_undershoot_ideal_6),<span class="string">'V \rightarrow'</span>];
text(t6_pk_undershoot_ideal_6, <span class="keyword">...</span>
     v5_pk_undershoot_ideal_6, <span class="keyword">...</span>
     strmin, <span class="string">'HorizontalAlignment'</span>, <span class="string">'right'</span>, <span class="string">'FontWeight'</span>, <span class="string">'bold'</span>);
</pre><img vspace="5" hspace="5" src="ELEN100L_Project_2_Solution_ShaneBuck_ThomasHeckman_W16_02.png" alt=""> <p>Display the MATLAB peak overshoot and undershoot values for the Ideal design.</p><pre class="codeinput">display(<span class="string">' '</span>);
display(<span class="string">'The MATLAB peak overshoot and undershoot values are:'</span>);
fprintf(<span class="string">'    V5 p.o. = %+11.4f Volts.\n'</span>,   v5_pk_overshoot_ideal_6);
fprintf(<span class="string">'    V5 p.u. = %+11.4f Volts.\n'</span>,   v5_pk_undershoot_ideal_6);
fprintf(<span class="string">'     t p.o. = %+11.4e seconds.\n'</span>, t6_pk_overshoot_ideal_6);
fprintf(<span class="string">'     t p.u. = %+11.4e seconds.\n'</span>, t6_pk_undershoot_ideal_6);
</pre><pre class="codeoutput"> 
The MATLAB peak overshoot and undershoot values are:
    V5 p.o. =     +1.0999 Volts.
    V5 p.u. =     +0.9900 Volts.
     t p.o. = +3.1568e-04 seconds.
     t p.u. = +6.3360e-04 seconds.
</pre><p>The LTSpice schematic for the circuit is shown below.</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_10_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>The LTSpice voltage source setup for the circuit is shown below.</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_11_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>The LTSpice model transient analysis simulation setup is shown below.</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_12_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>The LTSpice model for the simulation result is shown below.</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_13_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;

<span class="comment">% Capture peak overshoot and undershoot voltages from the plot.</span>
ltspice_v5_pk_overshoot_ideal_6  = 1.0835;
ltspice_v5_pk_undershoot_ideal_6 = 0.9931;

<span class="comment">% Capture peak overshoot and undershoot time stamps from the plot.</span>
ltspice_t6_pk_overshoot_ideal_6  = 721.3*10^-6;
ltspice_t6_pk_undershoot_ideal_6 = 1.033*10^-3;
</pre><p>Display the LTSpice peak overshoot and undershoot values for the Ideal design.</p><pre class="codeinput">display(<span class="string">' '</span>);
display(<span class="string">'The LTSpice peak overshoot and undershoot values are:'</span>);
fprintf(<span class="string">'    V5 p.o. = %+11.4f Volts.\n'</span>, ltspice_v5_pk_overshoot_ideal_6);
fprintf(<span class="string">'    V5 p.u. = %+11.4f Volts.\n'</span>, ltspice_v5_pk_undershoot_ideal_6);
fprintf(<span class="string">'     t p.o. = %+11.4e seconds.\n'</span>, ltspice_t6_pk_overshoot_ideal_6);
fprintf(<span class="string">'     t p.u. = %+11.4e seconds.\n'</span>, ltspice_t6_pk_undershoot_ideal_6);
</pre><pre class="codeoutput"> 
The LTSpice peak overshoot and undershoot values are:
    V5 p.o. =     +1.0835 Volts.
    V5 p.u. =     +0.9931 Volts.
     t p.o. = +7.2130e-04 seconds.
     t p.u. = +1.0330e-03 seconds.
</pre><p>Calculate the percent difference at the peak overshoot and undershoot values between MATLAB and LTSpice Ideal Designs.</p><pre class="codeinput">diff_ideal_v5_pk_overshoot_6  = <span class="keyword">...</span>
    (ltspice_v5_pk_overshoot_ideal_6 - v5_pk_overshoot_ideal_6) <span class="keyword">...</span>
    /abs(v5_pk_overshoot_ideal_6)*100;
diff_ideal_v5_pk_undershoot_6 = <span class="keyword">...</span>
    (ltspice_v5_pk_undershoot_ideal_6 - v5_pk_undershoot_ideal_6) <span class="keyword">...</span>
    /abs(v5_pk_undershoot_ideal_6)*100;

diff_ideal_t6_pk_overshoot_6  = <span class="keyword">...</span>
    (ltspice_t6_pk_overshoot_ideal_6 - t6_pk_overshoot_ideal_6) <span class="keyword">...</span>
    /abs(t6_pk_overshoot_ideal_6)*100;
diff_ideal_t6_pk_undershoot_6 = <span class="keyword">...</span>
    (ltspice_t6_pk_undershoot_ideal_6 - t6_pk_undershoot_ideal_6) <span class="keyword">...</span>
    /abs(t6_pk_undershoot_ideal_6)*100;

display(<span class="string">' '</span>);
display(<span class="string">'The % difference between MATLAB and LTSpice at the peaks:'</span>);
fprintf(<span class="string">'    MATLAB  V5 p.o. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         v5_pk_overshoot_ideal_6);
fprintf(<span class="string">'    LTSpice V5 p.o. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         ltspice_v5_pk_overshoot_ideal_6);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_ideal_v5_pk_overshoot_6);
fprintf(<span class="string">'    MATLAB  V5 p.u. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         v5_pk_undershoot_ideal_6);
fprintf(<span class="string">'    LTSpice V5 p.u. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         ltspice_v5_pk_undershoot_ideal_6);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_ideal_v5_pk_undershoot_6);

fprintf(<span class="string">'    MATLAB   t p.o. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         t6_pk_overshoot_ideal_6);
fprintf(<span class="string">'    LTSpice  t p.o. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         ltspice_t6_pk_overshoot_ideal_6);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_ideal_t6_pk_overshoot_6);
fprintf(<span class="string">'    MATLAB   t p.u. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         t6_pk_undershoot_ideal_6);
fprintf(<span class="string">'    LTSpice  t p.u. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         ltspice_t6_pk_undershoot_ideal_6);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_ideal_t6_pk_undershoot_6);
</pre><pre class="codeoutput"> 
The % difference between MATLAB and LTSpice at the peaks:
    MATLAB  V5 p.o. =     +1.0999 Volts.
    LTSpice V5 p.o. =     +1.0835 Volts.
        % diff =  -1.4951 (%).
    MATLAB  V5 p.u. =     +0.9900 Volts.
    LTSpice V5 p.u. =     +0.9931 Volts.
        % diff =  +0.3130 (%).
    MATLAB   t p.o. = +3.1568e-04 seconds.
    LTSpice  t p.o. = +7.2130e-04 seconds.
        % diff = +128.4925 (%).
    MATLAB   t p.u. = +6.3360e-04 seconds.
    LTSpice  t p.u. = +1.0330e-03 seconds.
        % diff = +63.0359 (%).
</pre><h2 id="26">Problem 7  Template</h2><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_14_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>Display the measured values for the power supply voltages and the components used in the Actual design for circuit 2.</p><pre class="codeinput">Vdd_meas_pos_2  =  15.613 ; <span class="comment">% Positive power supply voltage</span>
Vdd_meas_neg_2  = -15.069 ; <span class="comment">% Negative power supply voltage</span>

R1_ideal_meas_2 = 5030.5           ; <span class="comment">% Ohms</span>
R2_ideal_meas_2 = 5022.1           ; <span class="comment">% Ohms</span>
R3_ideal_meas_2 = 197.35 + 197.55  ; <span class="comment">% Ohms - Used two resistors to make 394.9 Ohms</span>
R4_ideal_meas_2 = 998.7            ; <span class="comment">% Ohms</span>
R5_ideal_meas_2 = 996.2            ; <span class="comment">% Ohms</span>
C1_ideal_meas_2 = 0.1105e-6        ; <span class="comment">% Farads</span>
C2_ideal_meas_2 = 0.1003e-6        ; <span class="comment">% Farads</span>

display(<span class="string">' '</span>);
display(<span class="string">'The measured component values for circuit 2 are:'</span>);
fprintf(<span class="string">'    Vdd+ = %+11.4f Volts.\n'</span>,  Vdd_meas_pos_2);
fprintf(<span class="string">'    Vdd- = %+11.4f Volts.\n'</span>,  Vdd_meas_neg_2);
fprintf(<span class="string">'    R1   = %+11.4f Ohms.\n'</span>,   R1_ideal_meas_2);
fprintf(<span class="string">'    R2   = %+11.4f Ohms.\n'</span>,   R2_ideal_meas_2);
fprintf(<span class="string">'    R3   = %+11.4f Ohms.\n'</span>,   R3_ideal_meas_2);
fprintf(<span class="string">'    R4   = %+11.4f Ohms.\n'</span>,   R4_ideal_meas_2);
fprintf(<span class="string">'    R5   = %+11.4f Ohms.\n'</span>,   R5_ideal_meas_2);
fprintf(<span class="string">'    C1   = %+11.4e Farads.\n'</span>, C1_ideal_meas_2);
fprintf(<span class="string">'    C2   = %+11.4e Farads.\n'</span>, C2_ideal_meas_2);
</pre><pre class="codeoutput"> 
The measured component values for circuit 2 are:
    Vdd+ =    +15.6130 Volts.
    Vdd- =    -15.0690 Volts.
    R1   =  +5030.5000 Ohms.
    R2   =  +5022.1000 Ohms.
    R3   =   +394.9000 Ohms.
    R4   =   +998.7000 Ohms.
    R5   =   +996.2000 Ohms.
    C1   = +1.1050e-07 Farads.
    C2   = +1.0030e-07 Farads.
</pre><p>Compute the percent differences between the Measured and Ideal design component values for circuit 2.</p><pre class="codeinput">diff_Vdd_pos_meas_2 = (Vdd_meas_pos_2-Vdd_pos)/abs(Vdd_pos)*100;
diff_Vdd_neg_meas_2 = (Vdd_meas_neg_2-Vdd_neg)/abs(Vdd_neg)*100;

diff_R1_meas_2 = (R1_ideal_meas_2-R1_ideal_2)/abs(R1_ideal_2)*100;
diff_R2_meas_2 = (R2_ideal_meas_2-R2_ideal_2)/abs(R2_ideal_2)*100;
diff_R3_meas_2 = (R3_ideal_meas_2-R3_ideal_2)/abs(R3_ideal_2)*100;
diff_R4_meas_2 = (R4_ideal_meas_2-R4_ideal_2)/abs(R4_ideal_2)*100;
diff_R5_meas_2 = (R5_ideal_meas_2-R5_ideal_2)/abs(R5_ideal_2)*100;
diff_C1_meas_2 = (C1_ideal_meas_2-C1_ideal_2)/abs(C1_ideal_2)*100;
diff_C2_meas_2 = (C2_ideal_meas_2-C2_ideal_2)/abs(C2_ideal_2)*100;

display(<span class="string">' '</span>);
display(<span class="string">'The percent difference between Measured and Ideal design'</span>);
display(<span class="string">'component values for circuit 2:'</span>);
fprintf(<span class="string">'    %% diff Vdd+ = %+8.4f (%%).\n'</span>, diff_Vdd_pos_meas_2);
fprintf(<span class="string">'    %% diff Vdd- = %+8.4f (%%).\n'</span>, diff_Vdd_neg_meas_2);
fprintf(<span class="string">'    %% diff R1   = %+8.4f (%%).\n'</span>, diff_R1_meas_2);
fprintf(<span class="string">'    %% diff R2   = %+8.4f (%%).\n'</span>, diff_R2_meas_2);
fprintf(<span class="string">'    %% diff R3   = %+8.4f (%%).\n'</span>, diff_R3_meas_2);
fprintf(<span class="string">'    %% diff R4   = %+8.4f (%%).\n'</span>, diff_R4_meas_2);
fprintf(<span class="string">'    %% diff R5   = %+8.4f (%%).\n'</span>, diff_R5_meas_2);
fprintf(<span class="string">'    %% diff C1   = %+8.4f (%%).\n'</span>, diff_C1_meas_2);
fprintf(<span class="string">'    %% diff C2   = %+8.4f (%%).\n'</span>, diff_C2_meas_2);
</pre><pre class="codeoutput"> 
The percent difference between Measured and Ideal design
component values for circuit 2:
    % diff Vdd+ =  +4.0867 (%).
    % diff Vdd- =  -0.4600 (%).
    % diff R1   =  +0.6100 (%).
    % diff R2   =  +0.4420 (%).
    % diff R3   =  -1.2750 (%).
    % diff R4   =  -0.1300 (%).
    % diff R5   =  -0.3800 (%).
    % diff C1   = +10.5000 (%).
    % diff C2   =  +0.3000 (%).
</pre><p>The function generator setup for circuit 2 is shown below.</p><p>Adjust the function generator's Vpp setting until the oscilloscope indicates that the input voltage has a Vpp as close to 1.0Vpp as possible. The function generator's frequency is set to produce a 100Hz square wave out of the Prototyping board location.</p><p>Capture an image of the function generator's window and include this image in the final report. The Snipping Tool in Windows can be used to capture this image.</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_15_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>The oscilloscope setup for circuit 2's input voltage is shown below.</p><p>........................................................................</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_16_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>Record the positive peak and negative peak input voltage values from the oscilloscope's cursor displays for circuit 2.</p><p>Calculate the measured input step function signal's amplitude by subtracting the negative peak input voltage from the positive peak input voltage.</p><p>These values will be used to determine the actual peak overshoot and undershoot values measured in subsequent steps.</p><p>This procedure is necessary to correlate the measured values with MATLAB because the step function used in MATLAB and LTSpice is a signal that starts at 0V and transitions to 1V, whereas the square wave signal produced by the ELVIS function generator is a signal that starts at -500mV and transitions to +500mV (ideally).</p><pre class="codeinput">Vin_meas_pos_2  =  492.85e-3 ;       <span class="comment">% Positive input signal voltage (from O-Scope)</span>
Vin_meas_neg_2  = -493.02e-3 ;       <span class="comment">% Negative input signal voltage</span>

Vin_step_meas_2 = Vin_meas_pos_2 - Vin_meas_neg_2;

display(<span class="string">' '</span>);
display(<span class="string">'The measured input signal values for circuit 2 are:'</span>);
fprintf(<span class="string">'    Vin+     = %+11.4f Volts.\n'</span>,  Vin_meas_pos_2);
fprintf(<span class="string">'    Vin-     = %+11.4f Volts.\n'</span>,  Vin_meas_neg_2);
fprintf(<span class="string">'    Vin_step = %+11.4f Volts.\n'</span>,  Vin_step_meas_2);
</pre><pre class="codeoutput"> 
The measured input signal values for circuit 2 are:
    Vin+     =     +0.4929 Volts.
    Vin-     =     -0.4930 Volts.
    Vin_step =     +0.9859 Volts.
</pre><p>The oscilloscope setup for circuit 2's input and output voltage is shown below.</p><p>........................................................................</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_17_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>Record the stabilized positive and negative output voltage values from the oscilloscope's cursor displays for circuit 2.</p><p>Calculate the measured output step function signal's amplitude by subtracting the stabilized negative output voltage from the stabilized positive output voltage.</p><p>These values will be used to confirm that the circuit is connected and operating properly.</p><pre class="codeinput">Vout_meas_pos_2  =  484.50e-3  ;   <span class="comment">% Stabilized positive output signal voltage</span>
Vout_meas_neg_2  = -489.38e-3  ;   <span class="comment">% Stabilized negative output signal voltage</span>

Vout_step_meas_2 = Vout_meas_pos_2 - Vout_meas_neg_2;

display(<span class="string">' '</span>);
display(<span class="string">'The stabilized measured output signal values for circuit 2 are:'</span>);
fprintf(<span class="string">'    Vout+     = %+11.4f Volts.\n'</span>,  Vout_meas_pos_2);
fprintf(<span class="string">'    Vout-     = %+11.4f Volts.\n'</span>,  Vout_meas_neg_2);
fprintf(<span class="string">'    Vout_step = %+11.4f Volts.\n'</span>,  Vout_step_meas_2);
</pre><pre class="codeoutput"> 
The stabilized measured output signal values for circuit 2 are:
    Vout+     =     +0.4845 Volts.
    Vout-     =     -0.4894 Volts.
    Vout_step =     +0.9739 Volts.
</pre><p>The oscilloscope setup for circuit 2's peak overshoot output voltage is shown below.</p><p>........................................................................</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_18_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>Record the peak overshoot output voltage and time of occurrence values from the oscilloscope's cursor displays for circuit 2.</p><p>Peak overshoot voltage is obtained from the oscilloscope's cursor 'C2' voltage measurement display.</p><p>Time of occurrence is obtained from the oscilloscope's 'dT' time measurement display.</p><p>Calculate the measured peak overshoot output voltage that is scaled to a step function that starts at 0V and transitions to 1V. This calculation is necessary to perform comparison calculations that are scaled to those used in MATLAB (or LTSpice for that matter).</p><pre class="codeinput"><span class="comment">% Capture peak overshoot voltage from the oscilloscope C2 display.</span>
meas_vout_pk_overshoot_2  =   1.19     ;

<span class="comment">% Capture peak overshoot time stamp from the oscilloscope dT display.</span>
meas_t2_pk_overshoot_ideal_2  = 198e-6      ;

<span class="comment">% Calculate the actual peak overshoot voltage.</span>
meas_v5_pk_overshoot_ideal_2 = <span class="keyword">...</span>
    meas_vout_pk_overshoot_2 - Vout_meas_neg_2;

display(<span class="string">' '</span>);
display(<span class="string">'The measured peak overshoot, output signal values for'</span>);
display(<span class="string">'circuit 2 are:'</span>);
fprintf(<span class="string">'    Vout p.o. meas = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
    meas_vout_pk_overshoot_2);
fprintf(<span class="string">'    Vout p.o.      = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
    meas_v5_pk_overshoot_ideal_2);
fprintf(<span class="string">'    t p.o.         = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
    meas_t2_pk_overshoot_ideal_2);
</pre><pre class="codeoutput"> 
The measured peak overshoot, output signal values for
circuit 2 are:
    Vout p.o. meas =     +1.1900 Volts.
    Vout p.o.      =     +1.6794 Volts.
    t p.o.         = +1.9800e-04 seconds.
</pre><p>The oscilloscope setup for circuit 2's peak undershoot output voltage is shown below.</p><p>........................................................................</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_19_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>Record the peak undershoot output voltage and time of occurrence values from the oscilloscope's cursor displays for circuit 2.</p><p>Peak undershoot voltage is obtained from the oscilloscope's cursor 'C2' voltage measurement display.</p><p>Time of occurrence is obtained from the oscilloscope's 'dT' time measurement display.</p><p>Calculate the measured peak undershoot output voltage that is scaled to a step function that starts at 0V and transitions to 1V. This calculation is necessary to perform comparison calculations that are scaled to those used in MATLAB (or LTSpice for that matter).</p><pre class="codeinput"><span class="comment">% Capture peak undershoot voltage from the oscilloscope C2 display.</span>
meas_vout_pk_undershoot_2 = -15.8e-3 ;

<span class="comment">% Capture peak undershoot time stamp from the oscilloscope dT display.</span>
meas_t2_pk_undershoot_ideal_2 = 646e-6;

<span class="comment">% Calculate the actual peak undershoot voltage.</span>
meas_v5_pk_undershoot_ideal_2 = <span class="keyword">...</span>
    meas_vout_pk_undershoot_2 - Vout_meas_neg_2;

display(<span class="string">' '</span>);
display(<span class="string">'The measured peak undershoot, output signal values for'</span>);
display(<span class="string">'circuit 2 are:'</span>);
fprintf(<span class="string">'    Vout p.u. meas = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
    meas_vout_pk_undershoot_2);
fprintf(<span class="string">'    Vout p.u.      = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
    meas_v5_pk_undershoot_ideal_2);
fprintf(<span class="string">'    t p.u.         = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
    meas_t2_pk_undershoot_ideal_2);
</pre><pre class="codeoutput"> 
The measured peak undershoot, output signal values for
circuit 2 are:
    Vout p.u. meas =     -0.0158 Volts.
    Vout p.u.      =     +0.4736 Volts.
    t p.u.         = +6.4600e-04 seconds.
</pre><p>Calculate the percent difference at the peak overshoot and undershoot values between MATLAB and measured results for circuit 2.</p><pre class="codeinput">diff_meas_v5_pk_overshoot_2  = <span class="keyword">...</span>
    (meas_v5_pk_overshoot_ideal_2 - v5_pk_overshoot_ideal_2) <span class="keyword">...</span>
    /abs(v5_pk_overshoot_ideal_2)*100;
diff_meas_v5_pk_undershoot_2 = <span class="keyword">...</span>
    (meas_v5_pk_undershoot_ideal_2 - v5_pk_undershoot_ideal_2) <span class="keyword">...</span>
    /abs(v5_pk_undershoot_ideal_2)*100;

diff_meas_t2_pk_overshoot_2  = <span class="keyword">...</span>
    (meas_t2_pk_overshoot_ideal_2 - t2_pk_overshoot_ideal_2) <span class="keyword">...</span>
    /abs(t2_pk_overshoot_ideal_2)*100;
diff_meas_t2_pk_undershoot_2 = <span class="keyword">...</span>
    (meas_t2_pk_undershoot_ideal_2 - t2_pk_undershoot_ideal_2) <span class="keyword">...</span>
    /abs(t2_pk_undershoot_ideal_2)*100;

display(<span class="string">' '</span>);
display(<span class="string">'The % difference between MATLAB and Measured values at the '</span>);
display(<span class="string">'peaks for circuit 2:'</span>);
fprintf(<span class="string">'    MATLAB   V5 p.o. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         v5_pk_overshoot_ideal_2);
fprintf(<span class="string">'    Measured V5 p.o. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         meas_v5_pk_overshoot_ideal_2);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_meas_v5_pk_overshoot_2);
fprintf(<span class="string">'    MATLAB   V5 p.u. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         v5_pk_undershoot_ideal_2);
fprintf(<span class="string">'    Measured V5 p.u. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         meas_v5_pk_undershoot_ideal_2);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_meas_v5_pk_undershoot_2);

fprintf(<span class="string">'    MATLAB    t p.o. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         t2_pk_overshoot_ideal_2);
fprintf(<span class="string">'    Measured  t p.o. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         meas_t2_pk_overshoot_ideal_2);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_meas_t2_pk_overshoot_2);
fprintf(<span class="string">'    MATLAB    t p.u. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         t2_pk_undershoot_ideal_2);
fprintf(<span class="string">'    Measured  t p.u. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         meas_t2_pk_undershoot_ideal_2);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_meas_t2_pk_undershoot_2);
</pre><pre class="codeoutput"> 
The % difference between MATLAB and Measured values at the 
peaks for circuit 2:
    MATLAB   V5 p.o. =     +1.5266 Volts.
    Measured V5 p.o. =     +1.6794 Volts.
        % diff = +10.0062 (%).
    MATLAB   V5 p.u. =     +0.7226 Volts.
    Measured V5 p.u. =     +0.4736 Volts.
        % diff = -34.4650 (%).
    MATLAB    t p.o. = +3.2217e-04 seconds.
    Measured  t p.o. = +1.9800e-04 seconds.
        % diff = -38.5413 (%).
    MATLAB    t p.u. = +6.4119e-04 seconds.
    Measured  t p.u. = +6.4600e-04 seconds.
        % diff =  +0.7505 (%).
</pre><p>Display the measured values for the power supply voltages and the components used in the Actual design for circuit 6.</p><pre class="codeinput">Vdd_meas_pos_6  =  15.613;        <span class="comment">% Positive power supply voltage</span>
Vdd_meas_neg_6  =  15.069;        <span class="comment">% Negative power supply voltage</span>

R1_ideal_meas_6 = 1283.2    ;  <span class="comment">% Ohms</span>
R2_ideal_meas_6 = 1292.7     ;  <span class="comment">% Ohms</span>
R3_ideal_meas_6 = 991.6     ;  <span class="comment">% Ohms</span>
R4_ideal_meas_6 = 998.7     ;  <span class="comment">% Ohms</span>
R5_ideal_meas_6 = 996.2     ; <span class="comment">% Ohms</span>
C1_ideal_meas_6 = 0.1105e-6     ; <span class="comment">% Farads</span>
C2_ideal_meas_6 = 0.1003e-6     ; <span class="comment">% Farads</span>

display(<span class="string">' '</span>);
display(<span class="string">'The measured component values for circuit 6 are:'</span>);
fprintf(<span class="string">'    Vdd+ = %+11.4f Volts.\n'</span>,  Vdd_meas_pos_6);
fprintf(<span class="string">'    Vdd- = %+11.4f Volts.\n'</span>,  Vdd_meas_neg_6);
fprintf(<span class="string">'    R1   = %+11.4f Ohms.\n'</span>,   R1_ideal_meas_6);
fprintf(<span class="string">'    R2   = %+11.4f Ohms.\n'</span>,   R2_ideal_meas_6);
fprintf(<span class="string">'    R3   = %+11.4f Ohms.\n'</span>,   R3_ideal_meas_6);
fprintf(<span class="string">'    R4   = %+11.4f Ohms.\n'</span>,   R4_ideal_meas_6);
fprintf(<span class="string">'    R5   = %+11.4f Ohms.\n'</span>,   R5_ideal_meas_6);
fprintf(<span class="string">'    C1   = %+11.4e Farads.\n'</span>, C1_ideal_meas_6);
fprintf(<span class="string">'    C2   = %+11.4e Farads.\n'</span>, C2_ideal_meas_6);
</pre><pre class="codeoutput"> 
The measured component values for circuit 6 are:
    Vdd+ =    +15.6130 Volts.
    Vdd- =    +15.0690 Volts.
    R1   =  +1283.2000 Ohms.
    R2   =  +1292.7000 Ohms.
    R3   =   +991.6000 Ohms.
    R4   =   +998.7000 Ohms.
    R5   =   +996.2000 Ohms.
    C1   = +1.1050e-07 Farads.
    C2   = +1.0030e-07 Farads.
</pre><p>Compute the percent differences between the Measured and Ideal design component values for circuit 6.</p><pre class="codeinput">diff_Vdd_pos_meas_6 = (Vdd_meas_pos_6-Vdd_pos)/abs(Vdd_pos)*100;
diff_Vdd_neg_meas_6 = (Vdd_meas_neg_6-Vdd_neg)/abs(Vdd_neg)*100;

diff_R1_meas_6 = (R1_ideal_meas_6-R1_ideal_6)/abs(R1_ideal_6)*100;
diff_R2_meas_6 = (R2_ideal_meas_6-R2_ideal_6)/abs(R2_ideal_6)*100;
diff_R3_meas_6 = (R3_ideal_meas_6-R3_ideal_6)/abs(R3_ideal_6)*100;
diff_R4_meas_6 = (R4_ideal_meas_6-R4_ideal_6)/abs(R4_ideal_6)*100;
diff_R5_meas_6 = (R5_ideal_meas_6-R5_ideal_6)/abs(R5_ideal_6)*100;
diff_C1_meas_6 = (C1_ideal_meas_6-C1_ideal_6)/abs(C1_ideal_6)*100;
diff_C2_meas_6 = (C2_ideal_meas_6-C2_ideal_6)/abs(C2_ideal_6)*100;

display(<span class="string">' '</span>);
display(<span class="string">'The percent difference between Measured and Ideal design'</span>);
display(<span class="string">'component values for circuit 6:'</span>);
fprintf(<span class="string">'    %% diff Vdd+ = %+8.4f (%%).\n'</span>, diff_Vdd_pos_meas_6);
fprintf(<span class="string">'    %% diff Vdd- = %+8.4f (%%).\n'</span>, diff_Vdd_neg_meas_6);
fprintf(<span class="string">'    %% diff R1   = %+8.4f (%%).\n'</span>, diff_R1_meas_6);
fprintf(<span class="string">'    %% diff R2   = %+8.4f (%%).\n'</span>, diff_R2_meas_6);
fprintf(<span class="string">'    %% diff R3   = %+8.4f (%%).\n'</span>, diff_R3_meas_6);
fprintf(<span class="string">'    %% diff R4   = %+8.4f (%%).\n'</span>, diff_R4_meas_6);
fprintf(<span class="string">'    %% diff R5   = %+8.4f (%%).\n'</span>, diff_R5_meas_6);
fprintf(<span class="string">'    %% diff C1   = %+8.4f (%%).\n'</span>, diff_C1_meas_6);
fprintf(<span class="string">'    %% diff C2   = %+8.4f (%%).\n'</span>, diff_C2_meas_6);
</pre><pre class="codeoutput"> 
The percent difference between Measured and Ideal design
component values for circuit 6:
    % diff Vdd+ =  +4.0867 (%).
    % diff Vdd- = +200.4600 (%).
    % diff R1   =  -6.5404 (%).
    % diff R2   =  -5.8485 (%).
    % diff R3   =  +3.2917 (%).
    % diff R4   =  -0.1300 (%).
    % diff R5   =  -0.3800 (%).
    % diff C1   = +10.5000 (%).
    % diff C2   =  +0.3000 (%).
</pre><p>The function generator setup for circuit 6 is shown below.</p><p>........................................................................</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_20_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>The oscilloscope setup for circuit 6's input voltage is shown below.</p><p>........................................................................</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_21_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>Record the positive peak and negative peak input voltage values from the oscilloscope's cursor displays for circuit 6.</p><p>........................................................................</p><pre class="codeinput">Vin_meas_pos_6  =  481.91e-3     ;       <span class="comment">% Positive input signal voltage</span>
Vin_meas_neg_6  = -484.97e-3     ;       <span class="comment">% Negative input signal voltage</span>

Vin_step_meas_6 = Vin_meas_pos_6 - Vin_meas_neg_6;

display(<span class="string">' '</span>);
display(<span class="string">'The measured input signal values for circuit 6 are:'</span>);
fprintf(<span class="string">'    Vin+     = %+11.4f Volts.\n'</span>,  Vin_meas_pos_6);
fprintf(<span class="string">'    Vin-     = %+11.4f Volts.\n'</span>,  Vin_meas_neg_6);
fprintf(<span class="string">'    Vin_step = %+11.4f Volts.\n'</span>,  Vin_step_meas_6);
</pre><pre class="codeoutput"> 
The measured input signal values for circuit 6 are:
    Vin+     =     +0.4819 Volts.
    Vin-     =     -0.4850 Volts.
    Vin_step =     +0.9669 Volts.
</pre><p>The oscilloscope setup for circuit 6's input and output voltage is shown below.</p><p>........................................................................</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_22_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>Record the stabilized positive and negative output voltage values from the oscilloscope's cursor displays for circuit 6.</p><p>Calculate the measured output step function signal's amplitude by subtracting the stabilized negative output voltage from the stabilized positive output voltage.</p><p>These values will be used to confirm that the circuit is connected and operating properly.</p><pre class="codeinput">Vout_meas_pos_6  =  488.25e-3    ;   <span class="comment">% Stabilized positive output signal voltage</span>
Vout_meas_neg_6  = -485.65e-3    ;   <span class="comment">% Stabilized negative output signal voltage</span>

Vout_step_meas_6 = Vout_meas_pos_6 - Vout_meas_neg_6;

display(<span class="string">' '</span>);
display(<span class="string">'The stabilized measured output signal values for circuit 6 are:'</span>);
fprintf(<span class="string">'    Vout+     = %+11.4f Volts.\n'</span>,  Vout_meas_pos_6);
fprintf(<span class="string">'    Vout-     = %+11.4f Volts.\n'</span>,  Vout_meas_neg_6);
fprintf(<span class="string">'    Vout_step = %+11.4f Volts.\n'</span>,  Vout_step_meas_6);
</pre><pre class="codeoutput"> 
The stabilized measured output signal values for circuit 6 are:
    Vout+     =     +0.4883 Volts.
    Vout-     =     -0.4857 Volts.
    Vout_step =     +0.9739 Volts.
</pre><p>The oscilloscope setup for circuit 6's peak overshoot output voltage is shown below.</p><p>........................................................................</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_23_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>Record the peak overshoot output voltage and time of occurrence values from the oscilloscope's cursor displays for circuit 6.</p><p>........................................................................</p><p>Capture peak overshoot voltage from the oscilloscope C2 display.</p><pre class="codeinput">meas_vout_pk_overshoot_6  = 592.93e-3       ;

<span class="comment">% Capture peak overshoot time stamp from the oscilloscope dT display.</span>
meas_t6_pk_overshoot_ideal_6  = 300e-6       ;

<span class="comment">% Calculate the actual peak overshoot voltage.</span>
meas_v5_pk_overshoot_ideal_6 = <span class="keyword">...</span>
    meas_vout_pk_overshoot_6 - Vout_meas_neg_6;

display(<span class="string">' '</span>);
display(<span class="string">'The measured peak overshoot, output signal values for'</span>);
display(<span class="string">'circuit 6 are:'</span>);
fprintf(<span class="string">'    Vout p.o. meas = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
    meas_vout_pk_overshoot_6);
fprintf(<span class="string">'    Vout p.o.      = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
    meas_v5_pk_overshoot_ideal_6);
fprintf(<span class="string">'    t p.o.         = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
    meas_t6_pk_overshoot_ideal_6);
</pre><pre class="codeoutput"> 
The measured peak overshoot, output signal values for
circuit 6 are:
    Vout p.o. meas =     +0.5929 Volts.
    Vout p.o.      =     +1.0786 Volts.
    t p.o.         = +3.0000e-04 seconds.
</pre><p>The oscilloscope setup for circuit 6's peak undershoot output voltage is shown below.</p><p>........................................................................</p><p><img vspace="5" hspace="5" src="ELEN100L_Project_2_figure_24_ShaneBuck_ThomasHeckman_winter2015.png" alt=""> </p><pre class="codeinput">fignum = fignum+1;
</pre><p>Record the peak undershoot output voltage and time of occurrence values from the oscilloscope's cursor displays for circuit 6.</p><p>Capture peak undershoot voltage from the oscilloscope C2 display.</p><pre class="codeinput">meas_vout_pk_undershoot_6 = 474.34e-3;

<span class="comment">% Capture peak undershoot time stamp from the oscilloscope dT display.</span>
meas_t6_pk_undershoot_ideal_6 = 638e-6;

<span class="comment">% Calculate the actual peak undershoot voltage.</span>
meas_v5_pk_undershoot_ideal_6 = <span class="keyword">...</span>
    meas_vout_pk_undershoot_6 - Vout_meas_neg_6;

display(<span class="string">' '</span>);
display(<span class="string">'The measured peak undershoot, output signal values for'</span>);
display(<span class="string">'circuit 6 are:'</span>);
fprintf(<span class="string">'    Vout p.u. meas = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
    meas_vout_pk_undershoot_6);
fprintf(<span class="string">'    Vout p.u.      = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
    meas_v5_pk_undershoot_ideal_6);
fprintf(<span class="string">'    t p.u.         = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
    meas_t6_pk_undershoot_ideal_6);
</pre><pre class="codeoutput"> 
The measured peak undershoot, output signal values for
circuit 6 are:
    Vout p.u. meas =     +0.4743 Volts.
    Vout p.u.      =     +0.9600 Volts.
    t p.u.         = +6.3800e-04 seconds.
</pre><p>Calculate the percent difference at the peak overshoot and undershoot values between MATLAB and measured results for circuit 6.</p><pre class="codeinput">diff_meas_v5_pk_overshoot_6  = <span class="keyword">...</span>
    (meas_v5_pk_overshoot_ideal_6 - v5_pk_overshoot_ideal_6) <span class="keyword">...</span>
    /abs(v5_pk_overshoot_ideal_6)*100;
diff_meas_v5_pk_undershoot_6 = <span class="keyword">...</span>
    (meas_v5_pk_undershoot_ideal_6 - v5_pk_undershoot_ideal_6) <span class="keyword">...</span>
    /abs(v5_pk_undershoot_ideal_6)*100;

diff_meas_t6_pk_overshoot_6  = <span class="keyword">...</span>
    (meas_t6_pk_overshoot_ideal_6 - t6_pk_overshoot_ideal_6) <span class="keyword">...</span>
    /abs(t6_pk_overshoot_ideal_6)*100;
diff_meas_t6_pk_undershoot_6 = <span class="keyword">...</span>
    (meas_t6_pk_undershoot_ideal_6 - t6_pk_undershoot_ideal_6) <span class="keyword">...</span>
    /abs(t6_pk_undershoot_ideal_6)*100;

display(<span class="string">' '</span>);
display(<span class="string">'The % difference between MATLAB and Measured values at the '</span>);
display(<span class="string">'peaks for circuit 6:'</span>);
fprintf(<span class="string">'    MATLAB   V5 p.o. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         v5_pk_overshoot_ideal_6);
fprintf(<span class="string">'    Measured V5 p.o. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         meas_v5_pk_overshoot_ideal_6);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_meas_v5_pk_overshoot_6);
fprintf(<span class="string">'    MATLAB   V5 p.u. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         v5_pk_undershoot_ideal_6);
fprintf(<span class="string">'    Measured V5 p.u. = %+11.4f Volts.\n'</span>, <span class="keyword">...</span>
         meas_v5_pk_undershoot_ideal_6);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_meas_v5_pk_undershoot_6);

fprintf(<span class="string">'    MATLAB    t p.o. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         t6_pk_overshoot_ideal_6);
fprintf(<span class="string">'    Measured  t p.o. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         meas_t6_pk_overshoot_ideal_6);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_meas_t6_pk_overshoot_6);
fprintf(<span class="string">'    MATLAB    t p.u. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         t6_pk_undershoot_ideal_6);
fprintf(<span class="string">'    Measured  t p.u. = %+11.4e seconds.\n'</span>, <span class="keyword">...</span>
         meas_t6_pk_undershoot_ideal_6);
fprintf(<span class="string">'        %% diff = %+8.4f (%%).\n'</span>, <span class="keyword">...</span>
         diff_meas_t6_pk_undershoot_6);
</pre><pre class="codeoutput"> 
The % difference between MATLAB and Measured values at the 
peaks for circuit 6:
    MATLAB   V5 p.o. =     +1.0999 Volts.
    Measured V5 p.o. =     +1.0786 Volts.
        % diff =  -1.9424 (%).
    MATLAB   V5 p.u. =     +0.9900 Volts.
    Measured V5 p.u. =     +0.9600 Volts.
        % diff =  -3.0314 (%).
    MATLAB    t p.o. = +3.1568e-04 seconds.
    Measured  t p.o. = +3.0000e-04 seconds.
        % diff =  -4.9664 (%).
    MATLAB    t p.u. = +6.3360e-04 seconds.
    Measured  t p.u. = +6.3800e-04 seconds.
        % diff =  +0.6940 (%).
</pre><h2 id="51">Program execution complete</h2><pre class="codeinput">display(<span class="string">' '</span>);
disp(<span class="string">'Program execution complete....'</span>);
</pre><pre class="codeoutput"> 
Program execution complete....
</pre><h2 id="52">MATLAB code listing</h2><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2017b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% ELEN 100L (Electric Circuits II): Project 2, Shane Buck, Thomas Heckman
%
% <<ELEN100L_Project_2_figure_01_ShaneBuck_ThomasHeckman_winter2015.png>>
%
% *Hard Copy Deliverables:*
%
% # Hard copy for hand calculations.
% # A MATLAB script and publish the solution using MATLAB's *publish*
% feature.
% # Turn in MATLAB scripts and a document of the run-time results.
% # Turn in oscilloscope images of the measured results.
%
% *Soft Copy Deliverables:*
%
% # Turn in all MATLAB files.
% # Turn in all LTSpice files.
% # Turn in all oscilloscope images of the measured results.
%

%% Initialize MATLAB Environment
%

clear; clc; clf; cla; close all;
format long; format compact;

%% Setup global variables
%

% These Ideal Design element values are fixed in the circuit.
VG  =  1 ;                     % Generator voltage

Vdd_pos  =  15     ;            % Positive power supply voltage
Vdd_neg  = -15     ;            % Negative power supply voltage

R1_ideal_2 = 5000      ;     % Ohms
R2_ideal_2 = 5000          ;     % Ohms
R3_ideal_2 = 400          ;     % Ohms
R4_ideal_2 = 1000          ;     % Ohms
R5_ideal_2 = 1000          ;     % Ohms
C1_ideal_2 = 0.1*10^-6           ;    % Farads
C2_ideal_2 = 0.1*10^-6           ;    % Farads

R1_ideal_6 = 1373          ;     % Ohms
R2_ideal_6 = 1373          ;     % Ohms
R3_ideal_6 = 960          ;     % Ohms
R4_ideal_6 = 1000          ;     % Ohms
R5_ideal_6 = 1000          ;     % Ohms
C1_ideal_6 = 0.1*10^-6           ;    % Farads
C2_ideal_6 = 0.1*10^-6           ;    % Farads

% Build an array for the R elements.
R_ideal_2 = [R1_ideal_2, R2_ideal_2, R3_ideal_2, R4_ideal_2, R5_ideal_2];
R_ideal_6 = [R1_ideal_6, R2_ideal_6, R3_ideal_6, R4_ideal_6, R5_ideal_6];

% Build an array for the C elements.
C_ideal_2 = [ (0),           (0),           (0), (0), (0)         ; ...
              (0), -(C1_ideal_2),           (0), (0), (C1_ideal_2); ...
              (0),           (0), -(C2_ideal_2), (0), (0)         ; ...
              (0),           (0),           (0), (0), (0)         ; ...
              (0),           (0),           (0), (0), (0)         ];

C_ideal_6 = [ (0),           (0),           (0), (0), (0)         ; ...
              (0), -(C1_ideal_6),           (0), (0), (C1_ideal_6); ...
              (0),           (0), -(C2_ideal_6), (0), (0)         ; ...
              (0),           (0),           (0), (0), (0)         ; ...
              (0),           (0),           (0), (0), (0)         ];


% Build an array for the source elements.
B = [VG;0;0;0;0];

% Build an array for the the time vector.
time2 = [0, 3*10^(-3)];
time6 = [0, 1*10^(-3)];

% Build an array for the the initial conditions.
x0 = [0; 0; 0; 0; 0];     % Assume everything is zero to start

% These values are used for plotting purposes.
fignum = 1;

plot_left_2   = 0;   plot_right_2 = time2(2);   % x-axis range (seconds)
plot_bottom_2 = 0;   plot_top_2   = VG+0.6;     % y-axis range (volts)

plot_left_6   = 0;   plot_right_6 = time6(2);   % x-axis range (seconds)
plot_bottom_6 = 0;   plot_top_6   = VG+0.2;     % y-axis range (volts)

%% Problem 2
%
% <<ELEN100L_Project_2_figure_02_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% Display the component values for the Ideal design.
%

display(' ');
display('The Ideal Design component values are:');
fprintf('    R1 = %+11.4f Ohms.\n', R1_ideal_2);
fprintf('    R2 = %+11.4f Ohms.\n', R2_ideal_2);
fprintf('    R3 = %+11.4f Ohms.\n', R3_ideal_2);
fprintf('    R4 = %+11.4f Ohms.\n', R4_ideal_2);
fprintf('    R5 = %+11.4f Ohms.\n', R5_ideal_2);
fprintf('    C1 = %+11.4e Farads.\n', C1_ideal_2);
fprintf('    C2 = %+11.4e Farads.\n', C2_ideal_2);

%%
% Calculate the MATLAB transient response for the Ideal design.
%

% Update the resistor variables used in the proj2E100_transient function
% before calling the ode23t solver.
R1_circuit =  R1_ideal_2;
R2_circuit =  R2_ideal_2;
R3_circuit =  R3_ideal_2;
R4_circuit =  R4_ideal_2;
R5_circuit =  R5_ideal_2;

options  = odeset('mass', C_ideal_2 , 'RelTol', 0.1e-9);
[t2, x2] = ode23t(@proj2E100_transient, time2, x0, options);

% Capture peak overshoot and undershoot voltages with indexes.
[v5_pk_overshoot_ideal_2 , ...
    v5_pk_overshoot_ideal_index_2 ] = max( x2(:,5) );
[v5_pk_undershoot_ideal_2, ...
    v5_pk_undershoot_ideal_index_2] = ...
    min( x2(v5_pk_overshoot_ideal_index_2 + 1:size(t2),5) );
v5_pk_undershoot_ideal_index_2 = ...
    v5_pk_undershoot_ideal_index_2 + v5_pk_overshoot_ideal_index_2;

% Capture peak overshoot and undershoot time stamps at peak indexes.
t2_pk_overshoot_ideal_2  = t2( v5_pk_overshoot_ideal_index_2);
t2_pk_undershoot_ideal_2 = t2(v5_pk_undershoot_ideal_index_2);

%%
% Generate the MATLAB plot for the transient response.

fignum = fignum+1; figObj = figure(fignum);  % Establish a figure number
set(fignum, 'Name', ...
    ['Prob 2: Transient Response Ideal Design']); % Name the figure

Tr_ideal_2_Plot = plot(t2,x2);                  % Generate plot
grid on;                                     % Turn grid on
xlabel('Time (seconds)');                    % Label the x-axis
ylabel('Amplitude (volts)');                 % Label the y-axis
axis([plot_left_2, plot_right_2, ...
      plot_bottom_2, plot_top_2]);           % Bound plot
title(['Figure ',num2str(fignum,'%-2.u'),...
       ': Problem 2 Transient Response Ideal Design']);
legend('v_1(t)', 'v_2(t)', 'v_3(t)', 'v_4(t)', 'v_5(t)', ...
    'Location', 'NorthEast');

% Add annotation to the plot.
strmax = ['\leftarrow ', num2str(t2_pk_overshoot_ideal_2 * 1e6), ...
          '\mus, ', num2str(v5_pk_overshoot_ideal_2),'V'];
text(t2_pk_overshoot_ideal_2, ...
     v5_pk_overshoot_ideal_2, ...
     strmax, 'HorizontalAlignment', 'left', 'FontWeight', 'bold');

strmin = ['\leftarrow ', num2str(t2_pk_undershoot_ideal_2 * 1e6), ...
          '\mus, ', num2str(v5_pk_undershoot_ideal_2),'V'];
text(t2_pk_undershoot_ideal_2, ...
     v5_pk_undershoot_ideal_2, ...
     strmin, 'HorizontalAlignment', 'left', 'FontWeight', 'bold');
 
%%
% Display the MATLAB peak overshoot and undershoot values for the Ideal
% design.
%

display(' ');
display('The MATLAB peak overshoot and undershoot values are:');
fprintf('    V5 p.o. = %+11.4f Volts.\n', v5_pk_overshoot_ideal_2);
fprintf('    V5 p.u. = %+11.4f Volts.\n', v5_pk_undershoot_ideal_2);
fprintf('     t p.o. = %+11.4e seconds.\n', t2_pk_overshoot_ideal_2);
fprintf('     t p.u. = %+11.4e seconds.\n', t2_pk_undershoot_ideal_2);

%% Problem 3
%
% <<ELEN100L_Project_2_figure_03_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% The LTSpice schematic for the circuit is shown below.
%
% <<ELEN100L_Project_2_figure_04_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% The LTSpice voltage source setup for the circuit is shown below.
%
% <<ELEN100L_Project_2_figure_05_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% The LTSpice model transient analysis simulation setup is shown below.
%
% <<ELEN100L_Project_2_figure_06_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% The LTSpice model for the simulation result is shown below.
%
% <<ELEN100L_Project_2_figure_07_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

% Capture peak overshoot and undershoot voltages from the LTSpice plot.
ltspice_v5_pk_overshoot_ideal_2  =  1.5268;
ltspice_v5_pk_undershoot_ideal_2 =  0.7225;

% Capture peak overshoot and undershoot time stamps from the LTSpice plot.
ltspice_t2_pk_overshoot_ideal_2  =  722*10^-6;
ltspice_t2_pk_undershoot_ideal_2 =  1.039*10^-3;

%%
% Display the LTSpice peak overshoot and undershoot values for the Ideal
% design.
%

display(' ');
display('The LTSpice peak overshoot and undershoot values are:');
fprintf('    V5 p.o. = %+11.4f Volts.\n', ...
    ltspice_v5_pk_overshoot_ideal_2);
fprintf('    V5 p.u. = %+11.4f Volts.\n', ...
    ltspice_v5_pk_undershoot_ideal_2);
fprintf('     t p.o. = %+11.4e seconds.\n', ...
    ltspice_t2_pk_overshoot_ideal_2);
fprintf('     t p.u. = %+11.4e seconds.\n', ...
    ltspice_t2_pk_undershoot_ideal_2);

%%
% Calculate the percent difference at the peak overshoot and undershoot
% values between MATLAB and LTSpice Ideal Designs.
%

diff_ideal_v5_pk_overshoot_2  = ...
    (ltspice_v5_pk_overshoot_ideal_2 - v5_pk_overshoot_ideal_2) ...
    /abs(v5_pk_overshoot_ideal_2)*100;
diff_ideal_v5_pk_undershoot_2 = ...
    (ltspice_v5_pk_undershoot_ideal_2 - v5_pk_undershoot_ideal_2) ...
    /abs(v5_pk_undershoot_ideal_2)*100;
diff_ideal_t2_pk_overshoot_2  = ...
    (ltspice_t2_pk_overshoot_ideal_2 - t2_pk_overshoot_ideal_2) ...
    /abs(t2_pk_overshoot_ideal_2)*100;
diff_ideal_t2_pk_undershoot_2 = ...
    (ltspice_t2_pk_undershoot_ideal_2 - t2_pk_undershoot_ideal_2) ...
    /abs(t2_pk_undershoot_ideal_2)*100;

display(' ');
display('The % difference between MATLAB and LTSpice at the peaks:');
fprintf('    MATLAB  V5 p.o. = %+11.4f Volts.\n', ...
         v5_pk_overshoot_ideal_2);
fprintf('    LTSpice V5 p.o. = %+11.4f Volts.\n', ...
         ltspice_v5_pk_overshoot_ideal_2);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_ideal_v5_pk_overshoot_2);

fprintf('    MATLAB  V5 p.u. = %+11.4f Volts.\n', ...
            v5_pk_undershoot_ideal_2);
fprintf('    LTSpice V5 p.u. = %+11.4f Volts.\n', ...
            ltspice_v5_pk_undershoot_ideal_2);
fprintf('        %% diff = %+8.4f (%%).\n', ...
            diff_ideal_v5_pk_undershoot_2);

fprintf('    MATLAB   t p.o. = %+11.4e seconds.\n', ...
            t2_pk_overshoot_ideal_2);
fprintf('    LTSpice  t p.o. = %+11.4e seconds.\n', ...
            ltspice_t2_pk_overshoot_ideal_2);
fprintf('        %% diff = %+8.4f (%%).\n', ...
            diff_ideal_t2_pk_overshoot_2);
fprintf('    MATLAB   t p.u. = %+11.4e seconds.\n', ...
            t2_pk_undershoot_ideal_2);
fprintf('    LTSpice  t p.u. = %+11.4e seconds.\n', ...
            ltspice_t2_pk_undershoot_ideal_2);
fprintf('        %% diff = %+8.4f (%%).\n', ...
            diff_ideal_t2_pk_undershoot_2);
     
%% Problem 6
%
% <<ELEN100L_Project_2_figure_08_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% Display the component values for the Ideal design.
%

display(' ');
display('The Ideal Design component values are:');
fprintf('    R1 = %+11.4f Ohms.\n',  R1_ideal_6 );
fprintf('    R2 = %+11.4f Ohms.\n',  R2_ideal_6);
fprintf('    R3 = %+11.4f Ohms.\n',  R3_ideal_6);
fprintf('    R4 = %+11.4f Ohms.\n',  R4_ideal_6);
fprintf('    R5 = %+11.4f Ohms.\n',  R5_ideal_6);
fprintf('    C1 = %+11.4e Farads.\n', C1_ideal_6);
fprintf('    C2 = %+11.4e Farads.\n', C2_ideal_6);

%%
% Calculate the MATLAB transient response for the Ideal design.
%

% Update the resistor variables used in the proj2E100_transient function
% before calling the ode23t solver.
R1_circuit =  R1_ideal_6;
R2_circuit =  R2_ideal_6 ;
R3_circuit =  R3_ideal_6;
R4_circuit =  R4_ideal_6;
R5_circuit =  R5_ideal_6;

%ODE solution, refer to the example in Problem 2
options  = odeset('mass',C_ideal_6, 'RelTol', 0.1e-9);  
[t6, x6] = ode23t(@proj2E100_transient, time6, x0, options);

% Capture peak overshoot and undershoot voltages with indexes.
[v5_pk_overshoot_ideal_6 , ...
    v5_pk_overshoot_ideal_index_6 ] = max( x6(:,5) );
[v5_pk_undershoot_ideal_6, ...
    v5_pk_undershoot_ideal_index_6] = ...
    min( x6(v5_pk_overshoot_ideal_index_6 + 1:size(t6),5) );
v5_pk_undershoot_ideal_index_6 = ...
    v5_pk_undershoot_ideal_index_6 + v5_pk_overshoot_ideal_index_6;

% Capture peak overshoot and undershoot time stamps at peak indexes.
t6_pk_overshoot_ideal_6  = t6(v5_pk_overshoot_ideal_index_6);
t6_pk_undershoot_ideal_6 = t6(v5_pk_undershoot_ideal_index_6);

%%
% Generate the MATLAB plot for the transient response.

fignum = fignum+1; figObj = figure(fignum);  % Establish a figure number
set(fignum, 'Name', ...
    ['Prob 6: Transient Response Ideal Design']); % Name the figure

Tr_ideal_6_Plot = plot(t6,x6);                % Generate plot
grid on;                                     % Turn grid on
xlabel('Time (seconds)');                    % Label the x-axis
ylabel('Amplitude (volts)');                 % Label the y-axis
axis([plot_left_6, plot_right_6, ...
      plot_bottom_6, plot_top_6]);           % Bound plot
title(['Figure ',num2str(fignum,'%-2.u'),...
       ': Problem 6 Transient Response Ideal Design']);
legend('v_1(t)', 'v_2(t)', 'v_3(t)', 'v_4(t)', 'v_5(t)', ...
    'Location', 'NorthEast');

% Add annotation to the plot.
strmax = ['\leftarrow ', num2str(t6_pk_overshoot_ideal_6 * 1e6), ...
          '\mus, ', num2str(v5_pk_overshoot_ideal_6),'V'];
text(t6_pk_overshoot_ideal_6, ...
     v5_pk_overshoot_ideal_6, ...
     strmax, 'HorizontalAlignment', 'left', 'FontWeight', 'bold');

strmin = [num2str(t6_pk_undershoot_ideal_6 * 1e6), ...
          '\mus, ', num2str(v5_pk_undershoot_ideal_6),'V \rightarrow'];
text(t6_pk_undershoot_ideal_6, ...
     v5_pk_undershoot_ideal_6, ...
     strmin, 'HorizontalAlignment', 'right', 'FontWeight', 'bold');
 
%%
% Display the MATLAB peak overshoot and undershoot values for the Ideal
% design.
%

display(' ');
display('The MATLAB peak overshoot and undershoot values are:');
fprintf('    V5 p.o. = %+11.4f Volts.\n',   v5_pk_overshoot_ideal_6);
fprintf('    V5 p.u. = %+11.4f Volts.\n',   v5_pk_undershoot_ideal_6);
fprintf('     t p.o. = %+11.4e seconds.\n', t6_pk_overshoot_ideal_6);
fprintf('     t p.u. = %+11.4e seconds.\n', t6_pk_undershoot_ideal_6);

%%
% The LTSpice schematic for the circuit is shown below.
%
% <<ELEN100L_Project_2_figure_10_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% The LTSpice voltage source setup for the circuit is shown below.
%
% <<ELEN100L_Project_2_figure_11_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% The LTSpice model transient analysis simulation setup is shown below.
%
% <<ELEN100L_Project_2_figure_12_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% The LTSpice model for the simulation result is shown below.
%
% <<ELEN100L_Project_2_figure_13_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

% Capture peak overshoot and undershoot voltages from the plot.
ltspice_v5_pk_overshoot_ideal_6  = 1.0835;
ltspice_v5_pk_undershoot_ideal_6 = 0.9931;

% Capture peak overshoot and undershoot time stamps from the plot.
ltspice_t6_pk_overshoot_ideal_6  = 721.3*10^-6;
ltspice_t6_pk_undershoot_ideal_6 = 1.033*10^-3;

%%
% Display the LTSpice peak overshoot and undershoot values for the Ideal
% design.
%

display(' ');
display('The LTSpice peak overshoot and undershoot values are:');
fprintf('    V5 p.o. = %+11.4f Volts.\n', ltspice_v5_pk_overshoot_ideal_6);
fprintf('    V5 p.u. = %+11.4f Volts.\n', ltspice_v5_pk_undershoot_ideal_6);
fprintf('     t p.o. = %+11.4e seconds.\n', ltspice_t6_pk_overshoot_ideal_6);
fprintf('     t p.u. = %+11.4e seconds.\n', ltspice_t6_pk_undershoot_ideal_6);


%%
% Calculate the percent difference at the peak overshoot and undershoot
% values between MATLAB and LTSpice Ideal Designs.
%

diff_ideal_v5_pk_overshoot_6  = ...
    (ltspice_v5_pk_overshoot_ideal_6 - v5_pk_overshoot_ideal_6) ...
    /abs(v5_pk_overshoot_ideal_6)*100;
diff_ideal_v5_pk_undershoot_6 = ...
    (ltspice_v5_pk_undershoot_ideal_6 - v5_pk_undershoot_ideal_6) ...
    /abs(v5_pk_undershoot_ideal_6)*100;

diff_ideal_t6_pk_overshoot_6  = ...
    (ltspice_t6_pk_overshoot_ideal_6 - t6_pk_overshoot_ideal_6) ...
    /abs(t6_pk_overshoot_ideal_6)*100;
diff_ideal_t6_pk_undershoot_6 = ...
    (ltspice_t6_pk_undershoot_ideal_6 - t6_pk_undershoot_ideal_6) ...
    /abs(t6_pk_undershoot_ideal_6)*100;

display(' ');
display('The % difference between MATLAB and LTSpice at the peaks:');
fprintf('    MATLAB  V5 p.o. = %+11.4f Volts.\n', ...
         v5_pk_overshoot_ideal_6);
fprintf('    LTSpice V5 p.o. = %+11.4f Volts.\n', ...
         ltspice_v5_pk_overshoot_ideal_6);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_ideal_v5_pk_overshoot_6);
fprintf('    MATLAB  V5 p.u. = %+11.4f Volts.\n', ...
         v5_pk_undershoot_ideal_6);
fprintf('    LTSpice V5 p.u. = %+11.4f Volts.\n', ...
         ltspice_v5_pk_undershoot_ideal_6);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_ideal_v5_pk_undershoot_6);

fprintf('    MATLAB   t p.o. = %+11.4e seconds.\n', ...
         t6_pk_overshoot_ideal_6);
fprintf('    LTSpice  t p.o. = %+11.4e seconds.\n', ...
         ltspice_t6_pk_overshoot_ideal_6);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_ideal_t6_pk_overshoot_6);
fprintf('    MATLAB   t p.u. = %+11.4e seconds.\n', ...
         t6_pk_undershoot_ideal_6);
fprintf('    LTSpice  t p.u. = %+11.4e seconds.\n', ...
         ltspice_t6_pk_undershoot_ideal_6);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_ideal_t6_pk_undershoot_6);


%% Problem 7  Template
%
% <<ELEN100L_Project_2_figure_14_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% Display the measured values for the power supply voltages and the
% components used in the Actual design for circuit 2.
%

Vdd_meas_pos_2  =  15.613 ; % Positive power supply voltage
Vdd_meas_neg_2  = -15.069 ; % Negative power supply voltage

R1_ideal_meas_2 = 5030.5           ; % Ohms
R2_ideal_meas_2 = 5022.1           ; % Ohms
R3_ideal_meas_2 = 197.35 + 197.55  ; % Ohms - Used two resistors to make 394.9 Ohms
R4_ideal_meas_2 = 998.7            ; % Ohms
R5_ideal_meas_2 = 996.2            ; % Ohms
C1_ideal_meas_2 = 0.1105e-6        ; % Farads
C2_ideal_meas_2 = 0.1003e-6        ; % Farads

display(' ');
display('The measured component values for circuit 2 are:');
fprintf('    Vdd+ = %+11.4f Volts.\n',  Vdd_meas_pos_2);
fprintf('    Vdd- = %+11.4f Volts.\n',  Vdd_meas_neg_2);
fprintf('    R1   = %+11.4f Ohms.\n',   R1_ideal_meas_2);
fprintf('    R2   = %+11.4f Ohms.\n',   R2_ideal_meas_2);
fprintf('    R3   = %+11.4f Ohms.\n',   R3_ideal_meas_2);
fprintf('    R4   = %+11.4f Ohms.\n',   R4_ideal_meas_2);
fprintf('    R5   = %+11.4f Ohms.\n',   R5_ideal_meas_2);
fprintf('    C1   = %+11.4e Farads.\n', C1_ideal_meas_2);
fprintf('    C2   = %+11.4e Farads.\n', C2_ideal_meas_2);

%%
% Compute the percent differences between the Measured and Ideal design
% component values for circuit 2.
%

diff_Vdd_pos_meas_2 = (Vdd_meas_pos_2-Vdd_pos)/abs(Vdd_pos)*100;
diff_Vdd_neg_meas_2 = (Vdd_meas_neg_2-Vdd_neg)/abs(Vdd_neg)*100;

diff_R1_meas_2 = (R1_ideal_meas_2-R1_ideal_2)/abs(R1_ideal_2)*100;
diff_R2_meas_2 = (R2_ideal_meas_2-R2_ideal_2)/abs(R2_ideal_2)*100;
diff_R3_meas_2 = (R3_ideal_meas_2-R3_ideal_2)/abs(R3_ideal_2)*100;
diff_R4_meas_2 = (R4_ideal_meas_2-R4_ideal_2)/abs(R4_ideal_2)*100;
diff_R5_meas_2 = (R5_ideal_meas_2-R5_ideal_2)/abs(R5_ideal_2)*100;
diff_C1_meas_2 = (C1_ideal_meas_2-C1_ideal_2)/abs(C1_ideal_2)*100;
diff_C2_meas_2 = (C2_ideal_meas_2-C2_ideal_2)/abs(C2_ideal_2)*100;

display(' ');
display('The percent difference between Measured and Ideal design');
display('component values for circuit 2:');
fprintf('    %% diff Vdd+ = %+8.4f (%%).\n', diff_Vdd_pos_meas_2);
fprintf('    %% diff Vdd- = %+8.4f (%%).\n', diff_Vdd_neg_meas_2);
fprintf('    %% diff R1   = %+8.4f (%%).\n', diff_R1_meas_2);
fprintf('    %% diff R2   = %+8.4f (%%).\n', diff_R2_meas_2);
fprintf('    %% diff R3   = %+8.4f (%%).\n', diff_R3_meas_2);
fprintf('    %% diff R4   = %+8.4f (%%).\n', diff_R4_meas_2);
fprintf('    %% diff R5   = %+8.4f (%%).\n', diff_R5_meas_2);
fprintf('    %% diff C1   = %+8.4f (%%).\n', diff_C1_meas_2);
fprintf('    %% diff C2   = %+8.4f (%%).\n', diff_C2_meas_2);

%%
% The function generator setup for circuit 2 is shown below.
%
% Adjust the function generator's Vpp setting until the oscilloscope
% indicates that the input voltage has a Vpp as close to 1.0Vpp as
% possible. The function generator's frequency is set to produce a 100Hz
% square wave out of the Prototyping board location.
%
% Capture an image of the function generator's window and include this
% image in the final report. The Snipping Tool in Windows can be used to
% capture this image.
%
% <<ELEN100L_Project_2_figure_15_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% The oscilloscope setup for circuit 2's input voltage is shown below.
%
% ........................................................................
%
% <<ELEN100L_Project_2_figure_16_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% Record the positive peak and negative peak input voltage values from the
% oscilloscope's cursor displays for circuit 2.
%
% Calculate the measured input step function signal's amplitude by
% subtracting the negative peak input voltage from the positive peak input
% voltage.
%
% These values will be used to determine the actual peak overshoot and
% undershoot values measured in subsequent steps.
%
% This procedure is necessary to correlate the measured values with MATLAB
% because the step function used in MATLAB and LTSpice is a signal that
% starts at 0V and transitions to 1V, whereas the square wave signal
% produced by the ELVIS function generator is a signal that starts at
% -500mV and transitions to +500mV (ideally).
%

Vin_meas_pos_2  =  492.85e-3 ;       % Positive input signal voltage (from O-Scope)
Vin_meas_neg_2  = -493.02e-3 ;       % Negative input signal voltage

Vin_step_meas_2 = Vin_meas_pos_2 - Vin_meas_neg_2;

display(' ');
display('The measured input signal values for circuit 2 are:');
fprintf('    Vin+     = %+11.4f Volts.\n',  Vin_meas_pos_2);
fprintf('    Vin-     = %+11.4f Volts.\n',  Vin_meas_neg_2);
fprintf('    Vin_step = %+11.4f Volts.\n',  Vin_step_meas_2);

%%
% The oscilloscope setup for circuit 2's input and output voltage is shown
% below.
%
% ........................................................................
%
% <<ELEN100L_Project_2_figure_17_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% Record the stabilized positive and negative output voltage values from
% the oscilloscope's cursor displays for circuit 2.
%
% Calculate the measured output step function signal's amplitude by
% subtracting the stabilized negative output voltage from the stabilized
% positive output voltage.
%
% These values will be used to confirm that the circuit is connected and
% operating properly. 
%

Vout_meas_pos_2  =  484.50e-3  ;   % Stabilized positive output signal voltage
Vout_meas_neg_2  = -489.38e-3  ;   % Stabilized negative output signal voltage

Vout_step_meas_2 = Vout_meas_pos_2 - Vout_meas_neg_2;

display(' ');
display('The stabilized measured output signal values for circuit 2 are:');
fprintf('    Vout+     = %+11.4f Volts.\n',  Vout_meas_pos_2);
fprintf('    Vout-     = %+11.4f Volts.\n',  Vout_meas_neg_2);
fprintf('    Vout_step = %+11.4f Volts.\n',  Vout_step_meas_2);

%%
% The oscilloscope setup for circuit 2's peak overshoot output voltage is
% shown below.
% 
% ........................................................................
%
% <<ELEN100L_Project_2_figure_18_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% Record the peak overshoot output voltage and time of occurrence values
% from the oscilloscope's cursor displays for circuit 2.
%
% Peak overshoot voltage is obtained from the oscilloscope's cursor 'C2'
% voltage measurement display.
%
% Time of occurrence is obtained from the oscilloscope's 'dT' time
% measurement display.
%
% Calculate the measured peak overshoot output voltage that is scaled to a
% step function that starts at 0V and transitions to 1V. This calculation
% is necessary to perform comparison calculations that are scaled to those
% used in MATLAB (or LTSpice for that matter).
%

% Capture peak overshoot voltage from the oscilloscope C2 display.
meas_vout_pk_overshoot_2  =   1.19     ;

% Capture peak overshoot time stamp from the oscilloscope dT display.
meas_t2_pk_overshoot_ideal_2  = 198e-6      ;

% Calculate the actual peak overshoot voltage.
meas_v5_pk_overshoot_ideal_2 = ...
    meas_vout_pk_overshoot_2 - Vout_meas_neg_2;

display(' ');
display('The measured peak overshoot, output signal values for');
display('circuit 2 are:');
fprintf('    Vout p.o. meas = %+11.4f Volts.\n', ...
    meas_vout_pk_overshoot_2);
fprintf('    Vout p.o.      = %+11.4f Volts.\n', ...
    meas_v5_pk_overshoot_ideal_2);
fprintf('    t p.o.         = %+11.4e seconds.\n', ...
    meas_t2_pk_overshoot_ideal_2);

%%
% The oscilloscope setup for circuit 2's peak undershoot output voltage is
% shown below.
%
% ........................................................................
%
% <<ELEN100L_Project_2_figure_19_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% Record the peak undershoot output voltage and time of occurrence values
% from the oscilloscope's cursor displays for circuit 2.
%
% Peak undershoot voltage is obtained from the oscilloscope's cursor 'C2'
% voltage measurement display.
%
% Time of occurrence is obtained from the oscilloscope's 'dT' time
% measurement display.
%
% Calculate the measured peak undershoot output voltage that is scaled to a
% step function that starts at 0V and transitions to 1V. This calculation
% is necessary to perform comparison calculations that are scaled to those
% used in MATLAB (or LTSpice for that matter).
%

% Capture peak undershoot voltage from the oscilloscope C2 display.
meas_vout_pk_undershoot_2 = -15.8e-3 ;

% Capture peak undershoot time stamp from the oscilloscope dT display.
meas_t2_pk_undershoot_ideal_2 = 646e-6;

% Calculate the actual peak undershoot voltage.
meas_v5_pk_undershoot_ideal_2 = ...
    meas_vout_pk_undershoot_2 - Vout_meas_neg_2;

display(' ');
display('The measured peak undershoot, output signal values for');
display('circuit 2 are:');
fprintf('    Vout p.u. meas = %+11.4f Volts.\n', ...
    meas_vout_pk_undershoot_2);
fprintf('    Vout p.u.      = %+11.4f Volts.\n', ...
    meas_v5_pk_undershoot_ideal_2);
fprintf('    t p.u.         = %+11.4e seconds.\n', ...
    meas_t2_pk_undershoot_ideal_2);

%%
% Calculate the percent difference at the peak overshoot and undershoot
% values between MATLAB and measured results for circuit 2.
%

diff_meas_v5_pk_overshoot_2  = ...
    (meas_v5_pk_overshoot_ideal_2 - v5_pk_overshoot_ideal_2) ...
    /abs(v5_pk_overshoot_ideal_2)*100;
diff_meas_v5_pk_undershoot_2 = ...
    (meas_v5_pk_undershoot_ideal_2 - v5_pk_undershoot_ideal_2) ...
    /abs(v5_pk_undershoot_ideal_2)*100;

diff_meas_t2_pk_overshoot_2  = ...
    (meas_t2_pk_overshoot_ideal_2 - t2_pk_overshoot_ideal_2) ...
    /abs(t2_pk_overshoot_ideal_2)*100;
diff_meas_t2_pk_undershoot_2 = ...
    (meas_t2_pk_undershoot_ideal_2 - t2_pk_undershoot_ideal_2) ...
    /abs(t2_pk_undershoot_ideal_2)*100;

display(' ');
display('The % difference between MATLAB and Measured values at the ');
display('peaks for circuit 2:');
fprintf('    MATLAB   V5 p.o. = %+11.4f Volts.\n', ...
         v5_pk_overshoot_ideal_2);
fprintf('    Measured V5 p.o. = %+11.4f Volts.\n', ...
         meas_v5_pk_overshoot_ideal_2);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_meas_v5_pk_overshoot_2);
fprintf('    MATLAB   V5 p.u. = %+11.4f Volts.\n', ...
         v5_pk_undershoot_ideal_2);
fprintf('    Measured V5 p.u. = %+11.4f Volts.\n', ...
         meas_v5_pk_undershoot_ideal_2);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_meas_v5_pk_undershoot_2);

fprintf('    MATLAB    t p.o. = %+11.4e seconds.\n', ...
         t2_pk_overshoot_ideal_2);
fprintf('    Measured  t p.o. = %+11.4e seconds.\n', ...
         meas_t2_pk_overshoot_ideal_2);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_meas_t2_pk_overshoot_2);
fprintf('    MATLAB    t p.u. = %+11.4e seconds.\n', ...
         t2_pk_undershoot_ideal_2);
fprintf('    Measured  t p.u. = %+11.4e seconds.\n', ...
         meas_t2_pk_undershoot_ideal_2);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_meas_t2_pk_undershoot_2);

%% 
% Display the measured values for the power supply voltages and the
% components used in the Actual design for circuit 6.
%

Vdd_meas_pos_6  =  15.613;        % Positive power supply voltage
Vdd_meas_neg_6  =  15.069;        % Negative power supply voltage

R1_ideal_meas_6 = 1283.2    ;  % Ohms
R2_ideal_meas_6 = 1292.7     ;  % Ohms
R3_ideal_meas_6 = 991.6     ;  % Ohms
R4_ideal_meas_6 = 998.7     ;  % Ohms
R5_ideal_meas_6 = 996.2     ; % Ohms
C1_ideal_meas_6 = 0.1105e-6     ; % Farads
C2_ideal_meas_6 = 0.1003e-6     ; % Farads

display(' ');
display('The measured component values for circuit 6 are:');
fprintf('    Vdd+ = %+11.4f Volts.\n',  Vdd_meas_pos_6);
fprintf('    Vdd- = %+11.4f Volts.\n',  Vdd_meas_neg_6);
fprintf('    R1   = %+11.4f Ohms.\n',   R1_ideal_meas_6);
fprintf('    R2   = %+11.4f Ohms.\n',   R2_ideal_meas_6);
fprintf('    R3   = %+11.4f Ohms.\n',   R3_ideal_meas_6);
fprintf('    R4   = %+11.4f Ohms.\n',   R4_ideal_meas_6);
fprintf('    R5   = %+11.4f Ohms.\n',   R5_ideal_meas_6);
fprintf('    C1   = %+11.4e Farads.\n', C1_ideal_meas_6);
fprintf('    C2   = %+11.4e Farads.\n', C2_ideal_meas_6);

%%
% Compute the percent differences between the Measured and Ideal design
% component values for circuit 6.
%

diff_Vdd_pos_meas_6 = (Vdd_meas_pos_6-Vdd_pos)/abs(Vdd_pos)*100;
diff_Vdd_neg_meas_6 = (Vdd_meas_neg_6-Vdd_neg)/abs(Vdd_neg)*100;

diff_R1_meas_6 = (R1_ideal_meas_6-R1_ideal_6)/abs(R1_ideal_6)*100;
diff_R2_meas_6 = (R2_ideal_meas_6-R2_ideal_6)/abs(R2_ideal_6)*100;
diff_R3_meas_6 = (R3_ideal_meas_6-R3_ideal_6)/abs(R3_ideal_6)*100;
diff_R4_meas_6 = (R4_ideal_meas_6-R4_ideal_6)/abs(R4_ideal_6)*100;
diff_R5_meas_6 = (R5_ideal_meas_6-R5_ideal_6)/abs(R5_ideal_6)*100;
diff_C1_meas_6 = (C1_ideal_meas_6-C1_ideal_6)/abs(C1_ideal_6)*100;
diff_C2_meas_6 = (C2_ideal_meas_6-C2_ideal_6)/abs(C2_ideal_6)*100;

display(' ');
display('The percent difference between Measured and Ideal design');
display('component values for circuit 6:');
fprintf('    %% diff Vdd+ = %+8.4f (%%).\n', diff_Vdd_pos_meas_6);
fprintf('    %% diff Vdd- = %+8.4f (%%).\n', diff_Vdd_neg_meas_6);
fprintf('    %% diff R1   = %+8.4f (%%).\n', diff_R1_meas_6);
fprintf('    %% diff R2   = %+8.4f (%%).\n', diff_R2_meas_6);
fprintf('    %% diff R3   = %+8.4f (%%).\n', diff_R3_meas_6);
fprintf('    %% diff R4   = %+8.4f (%%).\n', diff_R4_meas_6);
fprintf('    %% diff R5   = %+8.4f (%%).\n', diff_R5_meas_6);
fprintf('    %% diff C1   = %+8.4f (%%).\n', diff_C1_meas_6);
fprintf('    %% diff C2   = %+8.4f (%%).\n', diff_C2_meas_6);

%%
% The function generator setup for circuit 6 is shown below.
%
% ........................................................................
%
% <<ELEN100L_Project_2_figure_20_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% The oscilloscope setup for circuit 6's input voltage is shown below.
%
% ........................................................................
%
% <<ELEN100L_Project_2_figure_21_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% Record the positive peak and negative peak input voltage values from the
% oscilloscope's cursor displays for circuit 6.
%
% ........................................................................
%

Vin_meas_pos_6  =  481.91e-3     ;       % Positive input signal voltage
Vin_meas_neg_6  = -484.97e-3     ;       % Negative input signal voltage

Vin_step_meas_6 = Vin_meas_pos_6 - Vin_meas_neg_6;

display(' ');
display('The measured input signal values for circuit 6 are:');
fprintf('    Vin+     = %+11.4f Volts.\n',  Vin_meas_pos_6);
fprintf('    Vin-     = %+11.4f Volts.\n',  Vin_meas_neg_6);
fprintf('    Vin_step = %+11.4f Volts.\n',  Vin_step_meas_6);

%%
% The oscilloscope setup for circuit 6's input and output voltage is shown
% below.
%
% ........................................................................
%
% <<ELEN100L_Project_2_figure_22_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% Record the stabilized positive and negative output voltage values from
% the oscilloscope's cursor displays for circuit 6.
%
% Calculate the measured output step function signal's amplitude by
% subtracting the stabilized negative output voltage from the stabilized
% positive output voltage.
%
% These values will be used to confirm that the circuit is connected and
% operating properly. 
%

Vout_meas_pos_6  =  488.25e-3    ;   % Stabilized positive output signal voltage
Vout_meas_neg_6  = -485.65e-3    ;   % Stabilized negative output signal voltage

Vout_step_meas_6 = Vout_meas_pos_6 - Vout_meas_neg_6;

display(' ');
display('The stabilized measured output signal values for circuit 6 are:');
fprintf('    Vout+     = %+11.4f Volts.\n',  Vout_meas_pos_6);
fprintf('    Vout-     = %+11.4f Volts.\n',  Vout_meas_neg_6);
fprintf('    Vout_step = %+11.4f Volts.\n',  Vout_step_meas_6);

%%
% The oscilloscope setup for circuit 6's peak overshoot output voltage is
% shown below.
%
% ........................................................................
%
% <<ELEN100L_Project_2_figure_23_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% Record the peak overshoot output voltage and time of occurrence values
% from the oscilloscope's cursor displays for circuit 6.
%
% ........................................................................
% 
% Capture peak overshoot voltage from the oscilloscope C2 display.
meas_vout_pk_overshoot_6  = 592.93e-3       ;

% Capture peak overshoot time stamp from the oscilloscope dT display.
meas_t6_pk_overshoot_ideal_6  = 300e-6       ;

% Calculate the actual peak overshoot voltage.
meas_v5_pk_overshoot_ideal_6 = ...
    meas_vout_pk_overshoot_6 - Vout_meas_neg_6;

display(' ');
display('The measured peak overshoot, output signal values for');
display('circuit 6 are:');
fprintf('    Vout p.o. meas = %+11.4f Volts.\n', ...
    meas_vout_pk_overshoot_6);
fprintf('    Vout p.o.      = %+11.4f Volts.\n', ...
    meas_v5_pk_overshoot_ideal_6);
fprintf('    t p.o.         = %+11.4e seconds.\n', ...
    meas_t6_pk_overshoot_ideal_6);

%%
% The oscilloscope setup for circuit 6's peak undershoot output voltage is
% shown below.
%
% ........................................................................
%
% <<ELEN100L_Project_2_figure_24_ShaneBuck_ThomasHeckman_winter2015.png>>
%

fignum = fignum+1;

%%
% Record the peak undershoot output voltage and time of occurrence values
% from the oscilloscope's cursor displays for circuit 6.
%
% Capture peak undershoot voltage from the oscilloscope C2 display.
meas_vout_pk_undershoot_6 = 474.34e-3;

% Capture peak undershoot time stamp from the oscilloscope dT display.
meas_t6_pk_undershoot_ideal_6 = 638e-6;

% Calculate the actual peak undershoot voltage.
meas_v5_pk_undershoot_ideal_6 = ...
    meas_vout_pk_undershoot_6 - Vout_meas_neg_6;

display(' ');
display('The measured peak undershoot, output signal values for');
display('circuit 6 are:');
fprintf('    Vout p.u. meas = %+11.4f Volts.\n', ...
    meas_vout_pk_undershoot_6);
fprintf('    Vout p.u.      = %+11.4f Volts.\n', ...
    meas_v5_pk_undershoot_ideal_6);
fprintf('    t p.u.         = %+11.4e seconds.\n', ...
    meas_t6_pk_undershoot_ideal_6);

%%
% Calculate the percent difference at the peak overshoot and undershoot
% values between MATLAB and measured results for circuit 6.
%

diff_meas_v5_pk_overshoot_6  = ...
    (meas_v5_pk_overshoot_ideal_6 - v5_pk_overshoot_ideal_6) ...
    /abs(v5_pk_overshoot_ideal_6)*100;
diff_meas_v5_pk_undershoot_6 = ...
    (meas_v5_pk_undershoot_ideal_6 - v5_pk_undershoot_ideal_6) ...
    /abs(v5_pk_undershoot_ideal_6)*100;

diff_meas_t6_pk_overshoot_6  = ...
    (meas_t6_pk_overshoot_ideal_6 - t6_pk_overshoot_ideal_6) ...
    /abs(t6_pk_overshoot_ideal_6)*100;
diff_meas_t6_pk_undershoot_6 = ...
    (meas_t6_pk_undershoot_ideal_6 - t6_pk_undershoot_ideal_6) ...
    /abs(t6_pk_undershoot_ideal_6)*100;

display(' ');
display('The % difference between MATLAB and Measured values at the ');
display('peaks for circuit 6:');
fprintf('    MATLAB   V5 p.o. = %+11.4f Volts.\n', ...
         v5_pk_overshoot_ideal_6);
fprintf('    Measured V5 p.o. = %+11.4f Volts.\n', ...
         meas_v5_pk_overshoot_ideal_6);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_meas_v5_pk_overshoot_6);
fprintf('    MATLAB   V5 p.u. = %+11.4f Volts.\n', ...
         v5_pk_undershoot_ideal_6);
fprintf('    Measured V5 p.u. = %+11.4f Volts.\n', ...
         meas_v5_pk_undershoot_ideal_6);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_meas_v5_pk_undershoot_6);

fprintf('    MATLAB    t p.o. = %+11.4e seconds.\n', ...
         t6_pk_overshoot_ideal_6);
fprintf('    Measured  t p.o. = %+11.4e seconds.\n', ...
         meas_t6_pk_overshoot_ideal_6);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_meas_t6_pk_overshoot_6);
fprintf('    MATLAB    t p.u. = %+11.4e seconds.\n', ...
         t6_pk_undershoot_ideal_6);
fprintf('    Measured  t p.u. = %+11.4e seconds.\n', ...
         meas_t6_pk_undershoot_ideal_6);
fprintf('        %% diff = %+8.4f (%%).\n', ...
         diff_meas_t6_pk_undershoot_6);

%% Program execution complete
%

display(' ');
disp('Program execution complete....');

%% MATLAB code listing
%
         

##### SOURCE END #####
--></body></html>